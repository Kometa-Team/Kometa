/* Kometa Web UI Styles */
/* Design System v1.0 - See docs/STYLE_GUIDE.md */

:root {
    /* ===========================================
       SPACING SYSTEM (4pt grid)
       =========================================== */
    --space-0: 0;
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 24px;
    --space-6: 32px;
    --space-8: 48px;
    --space-10: 64px;

    /* ===========================================
       COLOR SYSTEM
       =========================================== */
    /* Brand */
    --primary-color: #e5a00d;
    --primary-hover: #f0b020;
    --primary-active: #cc8f0c;

    /* Legacy aliases (for backwards compatibility) */
    --danger-color: #dc3545;
    --success-color: #28a745;
    --warning-color: #ffc107;
    --safe-color: #28a745;
    --armed-color: #dc3545;

    /* Semantic colors */
    --color-success: #22c55e;
    --color-success-bg: rgba(34, 197, 94, 0.1);
    --color-warning: #f59e0b;
    --color-warning-bg: rgba(245, 158, 11, 0.1);
    --color-error: #ef4444;
    --color-error-bg: rgba(239, 68, 68, 0.1);
    --color-info: #3b82f6;
    --color-info-bg: rgba(59, 130, 246, 0.1);

    /* Backgrounds */
    --bg-base: #0d0d1a;
    --bg-color: #1a1a2e;
    --bg-primary: #1a1a2e;
    --bg-secondary: #16213e;
    --bg-tertiary: #0f3460;
    --bg-elevated: #1e3a5f;

    /* Borders */
    --border-color: #2a2a4e;
    --border-subtle: #1f1f3a;
    --border-strong: #3a3a6e;

    /* Text */
    --text-color: #e0e0e0;
    --text-primary: #f0f0f0;
    --text-secondary: #b0b0b0;
    --text-muted: #a0a0a0;
    --text-disabled: #606060;
    --text-inverse: #0d0d1a;

    /* ===========================================
       TYPOGRAPHY
       =========================================== */
    --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    --font-mono: 'SF Mono', 'Fira Code', 'Consolas', 'Monaco', monospace;

    /* Font sizes */
    --text-xs: 11px;
    --text-sm: 13px;
    --text-base: 14px;
    --text-md: 16px;
    --text-lg: 18px;
    --text-xl: 24px;
    --text-2xl: 32px;

    /* Font weights */
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;

    /* Line heights */
    --leading-tight: 1.25;
    --leading-normal: 1.5;
    --leading-relaxed: 1.75;

    /* ===========================================
       BORDERS & SHADOWS
       =========================================== */
    /* Border radius */
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-full: 9999px;

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.25);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.3);
    --shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.4);
    --shadow-inset: inset 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-focus: 0 0 0 3px rgba(229, 160, 13, 0.3);
    --shadow-focus-error: 0 0 0 3px rgba(239, 68, 68, 0.3);

    /* ===========================================
       LAYOUT
       =========================================== */
    --container-sm: 640px;
    --container-md: 960px;
    --container-lg: 1200px;
    --container-xl: 1400px;

    /* ===========================================
       TRANSITIONS
       =========================================== */
    --transition-fast: 100ms ease;
    --transition-normal: 150ms ease;
    --transition-slow: 300ms ease;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.6;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* Safety Banner */
.safety-banner {
    padding: 8px 20px;
    text-align: center;
    font-weight: 600;
    font-size: 14px;
    position: sticky;
    top: 0;
    z-index: 1000;
}

.safety-banner.safe {
    background-color: var(--safe-color);
    color: white;
}

.safety-banner.armed {
    background-color: var(--armed-color);
    color: white;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

.mode-description {
    margin-left: 10px;
    font-weight: normal;
    opacity: 0.9;
}

/* Header */
.header {
    background-color: var(--bg-secondary);
    padding: 15px 20px;
    border-bottom: 1px solid var(--border-color);
}

.header-content {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.header h1 {
    color: var(--primary-color);
    font-size: 24px;
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.status-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: var(--warning-color);
}

.status-dot.connected {
    background-color: var(--success-color);
}

.status-dot.disconnected {
    background-color: var(--danger-color);
}

/* Navigation */
.nav-tabs {
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    padding: 0 20px;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
}

.nav-tab {
    background: none;
    border: none;
    color: var(--text-muted);
    padding: 15px 20px;
    cursor: pointer;
    font-size: 14px;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}

.nav-tab:hover {
    color: var(--text-color);
}

.nav-tab.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
}

/* Main Content */
.main-content {
    flex: 1;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    width: 100%;
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    gap: 8px;
}

.btn-primary {
    background-color: var(--primary-color);
    color: #000;
}

.btn-primary:hover {
    background-color: var(--primary-hover);
}

.btn-secondary {
    background-color: var(--bg-tertiary);
    color: var(--text-color);
}

.btn-secondary:hover {
    background-color: #1a4a70;
}

.btn-danger {
    background-color: var(--danger-color);
    color: white;
}

.btn-danger:hover {
    background-color: #c82333;
}

.btn-large {
    padding: 15px 40px;
    font-size: 16px;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Config Section */
.config-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.config-actions {
    display: flex;
    gap: 10px;
}

/* Config Source Selector */
.config-source-selector {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
}

.config-source-selector h3 {
    margin-bottom: 15px;
    font-size: 16px;
}

.source-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
}

.source-option {
    background-color: var(--bg-tertiary);
    border: 2px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    cursor: pointer;
    text-align: left;
    transition: all 0.2s;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.source-option:hover {
    border-color: var(--primary-color);
}

.source-option.selected {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.1);
}

.option-icon {
    font-size: 24px;
}

.option-title {
    font-weight: 600;
    color: var(--text-color);
}

.option-desc {
    font-size: 13px;
    color: var(--text-muted);
}

/* Validation Messages */
.validation-messages {
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
}

.validation-messages.hidden {
    display: none;
}

.validation-messages.error {
    background-color: rgba(220, 53, 69, 0.2);
    border: 1px solid var(--danger-color);
}

.validation-messages.warning {
    background-color: rgba(255, 193, 7, 0.2);
    border: 1px solid var(--warning-color);
}

.validation-messages.success {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px solid var(--success-color);
}

.validation-messages ul {
    margin: 10px 0 0 20px;
}

/* Editor Container */
.config-editor-container {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    overflow: hidden;
}

.editor-tabs {
    display: flex;
    border-bottom: 1px solid var(--border-color);
}

.editor-tab {
    background: none;
    border: none;
    color: var(--text-muted);
    padding: 12px 20px;
    cursor: pointer;
    font-size: 14px;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}

.editor-tab:hover {
    color: var(--text-color);
}

.editor-tab.active {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
}

.editor-view {
    display: none;
    padding: 0;
}

.editor-view.active {
    display: block;
}

.config-editor {
    width: 100%;
    min-height: 500px;
    background-color: #0d0d1a;
    color: #e0e0e0;
    border: none;
    padding: 20px;
    font-family: var(--font-mono);
    font-size: 14px;
    line-height: 1.6;
    resize: vertical;
}

.config-editor:focus {
    outline: none;
}

/* Form View */
#view-form {
    padding: 20px;
}

.form-section {
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--border-color);
}

.form-section h3 {
    margin-bottom: 15px;
    color: var(--primary-color);
    font-size: 16px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-size: 14px;
    color: var(--text-muted);
}

.form-group input,
.form-group select {
    width: 100%;
    max-width: 400px;
    padding: 10px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    font-size: 14px;
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: var(--primary-color);
}

.form-group small {
    display: block;
    margin-top: 5px;
    color: var(--text-muted);
    font-size: 12px;
}

.form-group small a {
    color: var(--primary-color);
}

.form-note {
    font-size: 13px;
    color: var(--text-muted);
    font-style: italic;
}

/* Backups Section */
.backups-section {
    margin-top: 30px;
}

.backups-section h3 {
    margin-bottom: 15px;
}

.backups-list {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 15px;
    max-height: 200px;
    overflow-y: auto;
}

.backup-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid var(--border-color);
}

.backup-item:last-child {
    border-bottom: none;
}

.backup-info {
    display: flex;
    flex-direction: column;
}

.backup-name {
    font-family: var(--font-mono);
    font-size: 13px;
}

.backup-date {
    font-size: 12px;
    color: var(--text-muted);
}

/* Run Panel */
.run-panel {
    max-width: 800px;
}

.run-panel h2 {
    margin-bottom: 20px;
}

.run-mode-selector {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.mode-option {
    flex: 1;
    background-color: var(--bg-secondary);
    border: 2px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.2s;
}

.mode-option:hover:not(.disabled) {
    border-color: var(--primary-color);
}

.mode-option.selected {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.1);
}

.mode-option.disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.mode-option input {
    margin-right: 10px;
}

.mode-option label {
    cursor: pointer;
    display: flex;
    flex-direction: column;
}

.mode-name {
    font-weight: 600;
    font-size: 16px;
}

.mode-desc {
    font-size: 13px;
    color: var(--text-muted);
    margin-top: 5px;
}

/* Apply Confirmation */
.apply-confirmation {
    margin: 20px 0;
}

.apply-confirmation.hidden {
    display: none;
}

.warning-box {
    background-color: rgba(220, 53, 69, 0.15);
    border: 1px solid var(--danger-color);
    border-radius: 8px;
    padding: 20px;
}

.warning-box h4 {
    color: var(--danger-color);
    margin-bottom: 10px;
}

.warning-box code {
    background-color: var(--bg-color);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: var(--font-mono);
}

.warning-box input {
    width: 100%;
    max-width: 300px;
    margin-top: 10px;
    padding: 10px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    font-size: 14px;
}

/* Run Plan */
.run-plan {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
}

.run-plan h3 {
    margin-bottom: 15px;
}

.plan-loading {
    color: var(--text-muted);
    font-style: italic;
}

.plan-section {
    margin-bottom: 15px;
}

.plan-section-title {
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--primary-color);
}

.plan-list {
    list-style: none;
    padding-left: 20px;
}

.plan-list li::before {
    content: "â€¢";
    color: var(--primary-color);
    margin-right: 10px;
}

/* Run Filters */
.run-filters {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
}

.run-filters h3 {
    margin-bottom: 15px;
}

.filter-group {
    margin-bottom: 15px;
}

.filter-group label {
    display: block;
    margin-bottom: 5px;
    font-size: 14px;
    color: var(--text-muted);
}

.filter-group input,
.filter-group select {
    width: 100%;
    max-width: 400px;
    padding: 10px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    font-size: 14px;
}

.filter-group select[multiple] {
    min-height: 100px;
    padding: 8px;
}

.filter-group select[multiple] option {
    padding: 6px 10px;
    margin-bottom: 2px;
    border-radius: 4px;
}

.filter-group select[multiple] option:checked {
    background: linear-gradient(0deg, var(--primary) 0%, var(--primary) 100%);
    color: white;
}

.filter-group small {
    display: block;
    margin-top: 5px;
    color: var(--text-muted);
    font-size: 12px;
}

/* Run Actions */
.run-actions {
    margin-bottom: 20px;
}

/* Run Status */
.run-status {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
}

.run-status.hidden {
    display: none;
}

.status-header {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 18px;
    margin-bottom: 10px;
}

.status-icon.spinning {
    animation: spin 1s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.status-details {
    color: var(--text-muted);
    font-size: 14px;
}

.status-details code {
    background-color: var(--bg-color);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: var(--font-mono);
}

/* Logs Panel */
.logs-panel {
    height: calc(100vh - 300px);
    min-height: 400px;
    display: flex;
    flex-direction: column;
}

.logs-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.logs-actions {
    display: flex;
    align-items: center;
    gap: 15px;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 14px;
}

.logs-run-status {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 15px;
    background-color: rgba(255, 193, 7, 0.15);
    border: 1px solid var(--warning);
    border-radius: 6px;
    margin-bottom: 10px;
    font-size: 14px;
}

.logs-run-status .status-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background-color: var(--warning);
    animation: pulse 1.5s ease-in-out infinite;
}

.logs-run-status .status-indicator.running {
    background-color: var(--warning);
}

.logs-run-status code {
    background-color: rgba(0, 0, 0, 0.3);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 12px;
}

.logs-run-status .run-duration {
    color: var(--text-muted);
    font-size: 13px;
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.logs-container {
    flex: 1;
    background-color: #0d0d1a;
    border-radius: 8px;
    overflow: hidden;
}

.logs-output {
    height: 100%;
    padding: 15px;
    margin: 0;
    font-family: var(--font-mono);
    font-size: 13px;
    line-height: 1.5;
    overflow-y: auto;
    white-space: pre-wrap;
    word-break: break-word;
    color: #c0c0c0;
}

/* History Panel */
.history-panel h2 {
    margin-bottom: 20px;
}

.history-list {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    overflow: hidden;
}

.history-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s;
}

.history-item:hover {
    background-color: var(--bg-tertiary);
}

.history-item:last-child {
    border-bottom: none;
}

.history-info {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.history-id {
    font-family: var(--font-mono);
    font-size: 14px;
}

.history-time {
    font-size: 13px;
    color: var(--text-muted);
}

.history-meta {
    display: flex;
    align-items: center;
    gap: 10px;
}

.history-badge {
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.history-badge.dry-run {
    background-color: rgba(40, 167, 69, 0.2);
    color: var(--success-color);
}

.history-badge.apply {
    background-color: rgba(220, 53, 69, 0.2);
    color: var(--danger-color);
}

.history-status {
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.history-status.success {
    background-color: rgba(40, 167, 69, 0.2);
    color: var(--success-color);
}

.history-status.failed {
    background-color: rgba(220, 53, 69, 0.2);
    color: var(--danger-color);
}

.history-status.running {
    background-color: rgba(255, 193, 7, 0.2);
    color: var(--warning-color);
}

/* Footer */
.footer {
    background-color: var(--bg-secondary);
    padding: 15px 20px;
    text-align: center;
    border-top: 1px solid var(--border-color);
    font-size: 13px;
    color: var(--text-muted);
}

.footer a {
    color: var(--primary-color);
    text-decoration: none;
}

.footer a:hover {
    text-decoration: underline;
}

/* Utility Classes */
.hidden {
    display: none !important;
}

.loading {
    color: var(--text-muted);
    font-style: italic;
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--bg-color);
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-muted);
}

/* ============================================================================
   Overlay Preview Panel
   ============================================================================ */

.overlays-panel {
    max-width: 1200px;
}

.overlays-panel h2 {
    margin-bottom: 10px;
}

.section-desc {
    color: var(--text-muted);
    margin-bottom: 25px;
    font-size: 14px;
}

/* Overlay Source Selection */
.overlay-source-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 25px;
}

.overlay-source-section h3 {
    margin-bottom: 15px;
    color: var(--primary-color);
    font-size: 16px;
}

.overlay-source-options {
    display: flex;
    gap: 15px;
    align-items: flex-end;
    flex-wrap: wrap;
}

.overlay-source-options .form-group {
    flex: 1;
    min-width: 250px;
    margin-bottom: 0;
}

.overlay-source-options select {
    width: 100%;
    max-width: none;
}

/* Overlay List */
/* Overlay Groups Section */
.overlay-groups-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 25px;
}

.overlay-groups-section h3 {
    margin-bottom: 5px;
    color: var(--primary-color);
    font-size: 16px;
}

.overlay-groups-section .section-hint {
    margin-bottom: 15px;
}

.overlay-groups {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.overlay-group-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    padding: 6px 12px;
    font-size: 13px;
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.2s;
}

.overlay-group-tag:hover {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.1);
}

.overlay-group-tag.active {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.2);
}

.overlay-group-tag .group-count {
    background-color: var(--primary-color);
    color: #000;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 10px;
}

/* Overlay List Section */
.overlay-list-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 25px;
}

.overlay-list-section h3 {
    margin-bottom: 15px;
    color: var(--primary-color);
    font-size: 16px;
}

.overlay-list-controls {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.filter-select {
    padding: 8px 12px;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    font-size: 13px;
    cursor: pointer;
}

.filter-select:focus {
    outline: none;
    border-color: var(--primary-color);
}

.overlay-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 12px;
    max-height: 300px;
    overflow-y: auto;
    padding: 5px;
}

.placeholder-text {
    color: var(--text-muted);
    font-style: italic;
    font-size: 14px;
    grid-column: 1 / -1;
}

.overlay-item {
    background-color: var(--bg-tertiary);
    border: 2px solid var(--border-color);
    border-radius: 6px;
    padding: 12px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.overlay-item:hover {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.05);
}

.overlay-item.selected {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.15);
}

.overlay-item .overlay-name {
    font-weight: 600;
    font-size: 14px;
    color: var(--text-color);
    word-break: break-word;
}

.overlay-item .overlay-type {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.overlay-item .overlay-position {
    font-size: 12px;
    color: var(--text-muted);
}

.overlay-item .overlay-meta {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

.overlay-item .overlay-group-indicator {
    font-size: 10px;
    background-color: rgba(229, 160, 13, 0.2);
    color: var(--primary-color);
    padding: 2px 6px;
    border-radius: 10px;
    text-transform: capitalize;
}

/* Preview Section */
.preview-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 25px;
}

.preview-section h3 {
    margin-bottom: 15px;
    color: var(--primary-color);
    font-size: 16px;
}

.preview-controls {
    display: flex;
    gap: 15px;
    align-items: flex-end;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.preview-controls .form-group {
    margin-bottom: 0;
}

.preview-controls select {
    max-width: 200px;
}

/* Preview Canvas */
.preview-canvas-container {
    display: flex;
    justify-content: center;
    padding: 20px;
    background-color: var(--bg-color);
    border-radius: 8px;
    margin-bottom: 20px;
}

.preview-canvas {
    background-color: #2a2a4e;
    border-radius: 4px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 300px;
    min-height: 450px;
    max-width: 100%;
}

.preview-canvas img {
    max-width: 100%;
    max-height: 600px;
    height: auto;
    display: block;
}

.canvas-placeholder {
    text-align: center;
    color: var(--text-muted);
    padding: 40px;
}

.canvas-placeholder span {
    font-size: 48px;
    display: block;
    margin-bottom: 15px;
    opacity: 0.5;
}

.canvas-placeholder p {
    font-size: 14px;
}

/* Selected Overlays */
.selected-overlays {
    border-top: 1px solid var(--border-color);
    padding-top: 20px;
}

.selected-overlays h4 {
    margin-bottom: 12px;
    font-size: 14px;
    color: var(--text-color);
}

.selected-overlay-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 15px;
    min-height: 40px;
    padding: 10px;
    background-color: var(--bg-color);
    border-radius: 6px;
}

.selected-overlay-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background-color: var(--primary-color);
    color: #000;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.selected-overlay-tag .remove-tag {
    cursor: pointer;
    opacity: 0.7;
    font-weight: bold;
}

.selected-overlay-tag .remove-tag:hover {
    opacity: 1;
}

.btn-small {
    padding: 6px 12px;
    font-size: 12px;
}

/* Overlay Details Panel */
.overlay-details-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 25px;
}

.overlay-details-section.hidden {
    display: none;
}

.overlay-details-section h3 {
    margin-bottom: 15px;
    color: var(--primary-color);
    font-size: 16px;
}

.details-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}

.detail-row {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.detail-label {
    font-size: 12px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.detail-value {
    font-size: 14px;
    color: var(--text-color);
    word-break: break-word;
}

/* Loading state for overlays */
.overlay-list.loading::after {
    content: "Loading overlays...";
    color: var(--text-muted);
    font-style: italic;
    grid-column: 1 / -1;
}

/* ============================================================================
   Poster Source Selection (for overlay preview)
   ============================================================================ */

.poster-source-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 25px;
}

.poster-source-section h3 {
    margin-bottom: 8px;
    color: var(--primary-color);
    font-size: 16px;
}

.section-hint {
    color: var(--text-muted);
    font-size: 13px;
    margin-bottom: 15px;
}

/* Poster Source Tabs */
.poster-source-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 20px;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 15px;
}

.poster-tab {
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    padding: 10px 16px;
    color: var(--text-muted);
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
}

.poster-tab:hover {
    color: var(--text-color);
    border-color: var(--primary-color);
}

.poster-tab.active {
    background-color: var(--primary-color);
    color: #000;
    border-color: var(--primary-color);
}

/* Poster Source Content */
.poster-source-content {
    display: none;
}

.poster-source-content.active {
    display: block;
}

/* Media Search Row */
.media-search-row {
    display: flex;
    gap: 12px;
    align-items: flex-end;
    flex-wrap: wrap;
    margin-bottom: 15px;
}

.media-search-row .form-group {
    flex: 1;
    min-width: 200px;
    margin-bottom: 0;
}

.media-search-row input {
    width: 100%;
    max-width: none;
}

/* Source Status */
.source-status {
    font-size: 13px;
    margin-bottom: 10px;
    padding: 8px 12px;
    border-radius: 4px;
    display: none;
}

.source-status.connected {
    display: block;
    background-color: rgba(40, 167, 69, 0.15);
    color: var(--success-color);
}

.source-status.disconnected {
    display: block;
    background-color: rgba(220, 53, 69, 0.15);
    color: var(--danger-color);
}

/* Media Results Grid */
.media-results {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 12px;
    max-height: 320px;
    overflow-y: auto;
    padding: 5px;
}

.media-results .placeholder-text {
    grid-column: 1 / -1;
}

/* Media Item Card */
.media-item {
    background-color: var(--bg-tertiary);
    border: 2px solid var(--border-color);
    border-radius: 6px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.2s;
}

.media-item:hover {
    border-color: var(--primary-color);
    transform: translateY(-2px);
}

.media-item.selected {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(229, 160, 13, 0.3);
}

.media-item-poster {
    width: 100%;
    height: 160px;
    background-color: var(--bg-color);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.media-item-poster img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.media-item-poster .no-poster {
    color: var(--text-muted);
    font-size: 36px;
    opacity: 0.3;
}

.media-item-info {
    padding: 10px;
}

.media-item-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-bottom: 4px;
}

.media-item-year {
    font-size: 11px;
    color: var(--text-muted);
}

/* Selected Poster Info */
.selected-poster-info {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 15px;
    background-color: rgba(229, 160, 13, 0.1);
    border: 1px solid var(--primary-color);
    border-radius: 6px;
    margin-top: 15px;
}

.selected-poster-info.hidden {
    display: none;
}

.selected-label {
    font-size: 13px;
    color: var(--text-muted);
}

.selected-title {
    flex: 1;
    font-weight: 600;
    color: var(--primary-color);
}

.btn-clear {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 4px 8px;
    font-size: 12px;
}

.btn-clear:hover {
    color: var(--danger-color);
}

/* Preview Actions */
.preview-actions {
    margin-bottom: 20px;
}

/* Template Variables Section */
.template-vars-section {
    margin-top: 15px;
}

.template-vars-section details {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
}

.template-vars-section summary {
    cursor: pointer;
    padding: 10px 15px;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 10px;
}

.template-vars-section summary:hover {
    background-color: var(--bg-tertiary);
}

.template-vars-content {
    padding: 15px;
    border-top: 1px solid var(--border-color);
}

.template-vars-input {
    width: 100%;
    min-height: 80px;
    font-family: var(--font-mono);
    font-size: 13px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    color: var(--text-color);
    padding: 10px;
    resize: vertical;
}

.template-vars-input:focus {
    outline: none;
    border-color: var(--primary-color);
}

.template-vars-presets {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin: 10px 0;
    align-items: center;
}

.preset-label {
    font-size: 12px;
    color: var(--text-muted);
}

.preset-btn {
    font-size: 11px;
    padding: 4px 8px;
}

.badge {
    display: inline-block;
    padding: 2px 8px;
    font-size: 11px;
    font-weight: 500;
    border-radius: 10px;
    background-color: var(--primary-color);
    color: var(--bg-color);
}

.badge.hidden {
    display: none;
}

.btn-small {
    font-size: 12px;
    padding: 6px 12px;
}

/* Overlay Images Browser */
.overlay-images-section {
    margin-top: 15px;
}

.overlay-images-section details {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
}

.overlay-images-section summary {
    padding: 12px 15px;
    cursor: pointer;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 10px;
}

.overlay-images-section summary:hover {
    background-color: rgba(229, 160, 13, 0.05);
}

.overlay-images-content {
    padding: 15px;
    border-top: 1px solid var(--border-color);
}

.overlay-images-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 15px;
    max-height: 400px;
    overflow-y: auto;
    padding: 10px 5px;
}

.overlay-image-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 10px;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.overlay-image-item:hover {
    border-color: var(--primary-color);
    transform: scale(1.02);
}

.overlay-image-item img {
    max-width: 100%;
    max-height: 80px;
    object-fit: contain;
}

.overlay-image-item .image-name {
    font-size: 11px;
    color: var(--text-muted);
    text-align: center;
    word-break: break-word;
    max-width: 100%;
}

.overlay-image-item .image-placeholder {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--bg-color);
    border-radius: 4px;
    color: var(--text-muted);
    font-size: 24px;
}

/* ============================================================================
   Visual Overlay Editor
   ============================================================================ */

.visual-editor-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    padding: 20px;
    margin-top: 25px;
}

.visual-editor-section h3 {
    margin-bottom: 8px;
    color: var(--primary-color);
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.badge-beta {
    font-size: 10px;
    background-color: var(--warning-color);
    color: #000;
}

.visual-editor-toolbar {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.toolbar-icon {
    margin-right: 4px;
}

/* Modal Styles */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 20px;
}

.modal.hidden {
    display: none;
}

.modal-content {
    background-color: var(--bg-secondary);
    border-radius: 12px;
    max-height: 95vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.visual-editor-modal-content {
    width: 95vw;
    height: 90vh;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    border-bottom: 1px solid var(--border-color);
    background-color: var(--bg-tertiary);
}

.modal-header h2 {
    font-size: 18px;
    color: var(--primary-color);
}

.modal-header-actions {
    display: flex;
    gap: 8px;
}

/* Visual Editor Container */
.visual-editor-container {
    display: flex;
    flex: 1;
    overflow: hidden;
}

/* Canvas Panel (left side) */
.visual-editor-canvas-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: var(--bg-color);
    border-right: 1px solid var(--border-color);
}

.canvas-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
    flex-wrap: wrap;
    gap: 10px;
}

.canvas-toolbar .toolbar-left {
    display: flex;
    gap: 8px;
}

.zoom-controls {
    display: flex;
    align-items: center;
    gap: 8px;
}

.zoom-controls span {
    min-width: 50px;
    text-align: center;
    font-size: 13px;
    color: var(--text-muted);
}

.btn-icon {
    padding: 6px 10px;
    min-width: 32px;
}

.canvas-info {
    font-size: 13px;
    color: var(--text-muted);
}

.snap-controls {
    display: flex;
    align-items: center;
    gap: 10px;
}

.snap-controls .filter-select {
    width: auto;
    min-width: 70px;
}

/* Visual Canvas Wrapper */
.visual-canvas-wrapper {
    flex: 1;
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    background: repeating-conic-gradient(#1a1a2e 0% 25%, #16213e 0% 50%) 50% / 20px 20px;
}

.visual-canvas {
    position: relative;
    transform-origin: center center;
    transition: transform 0.2s ease;
}

.canvas-poster {
    position: relative;
    background-color: #333;
    width: 500px;
    height: 750px;
    background-size: cover;
    background-position: center;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

.canvas-grid {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    opacity: 0.3;
    background-image:
        linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px);
    background-size: 25px 25px;
}

.canvas-grid.hidden {
    display: none;
}

/* Overlay Elements on Canvas */
.canvas-overlay {
    position: absolute;
    cursor: move;
    border: 2px solid transparent;
    transition: border-color 0.15s;
    user-select: none;
}

.canvas-overlay:hover {
    border-color: rgba(229, 160, 13, 0.5);
}

.canvas-overlay.selected {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(229, 160, 13, 0.3);
}

.canvas-overlay.dragging {
    opacity: 0.8;
    z-index: 1000;
}

/* Resize Handles */
.resize-handle {
    position: absolute;
    width: 10px;
    height: 10px;
    background-color: var(--primary-color);
    border: 1px solid #000;
    border-radius: 2px;
    z-index: 10;
}

.resize-handle.nw { top: -5px; left: -5px; cursor: nw-resize; }
.resize-handle.ne { top: -5px; right: -5px; cursor: ne-resize; }
.resize-handle.sw { bottom: -5px; left: -5px; cursor: sw-resize; }
.resize-handle.se { bottom: -5px; right: -5px; cursor: se-resize; }
.resize-handle.n { top: -5px; left: 50%; transform: translateX(-50%); cursor: n-resize; }
.resize-handle.s { bottom: -5px; left: 50%; transform: translateX(-50%); cursor: s-resize; }
.resize-handle.e { top: 50%; right: -5px; transform: translateY(-50%); cursor: e-resize; }
.resize-handle.w { top: 50%; left: -5px; transform: translateY(-50%); cursor: w-resize; }

.canvas-overlay:not(.selected) .resize-handle {
    display: none;
}

/* Canvas Status Bar */
.canvas-status-bar {
    display: flex;
    justify-content: space-between;
    padding: 8px 15px;
    background-color: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
    font-size: 12px;
    color: var(--text-muted);
}

/* Right Panel */
.visual-editor-right-panel {
    width: 350px;
    display: flex;
    flex-direction: column;
    background-color: var(--bg-secondary);
    overflow: hidden;
}

.panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background-color: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.panel-header h4 {
    font-size: 13px;
    color: var(--text-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.panel-actions {
    display: flex;
    gap: 6px;
}

/* Properties Panel */
.properties-panel {
    border-bottom: 1px solid var(--border-color);
}

.properties-content {
    padding: 15px;
    max-height: 200px;
    overflow-y: auto;
}

.property-row {
    margin-bottom: 12px;
}

.property-row label {
    display: block;
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 4px;
    text-transform: uppercase;
}

.property-row input,
.property-row select {
    width: 100%;
    padding: 6px 10px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    color: var(--text-color);
    font-size: 13px;
}

.property-row input:focus,
.property-row select:focus {
    outline: none;
    border-color: var(--primary-color);
}

.property-row-inline {
    display: flex;
    gap: 10px;
}

.property-row-inline .property-row {
    flex: 1;
}

/* Layers Panel */
.layers-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border-bottom: 1px solid var(--border-color);
}

.layers-list {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
}

.layer-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    margin-bottom: 6px;
    cursor: pointer;
    transition: all 0.15s;
}

.layer-item:hover {
    border-color: var(--primary-color);
}

.layer-item.selected {
    background-color: rgba(229, 160, 13, 0.15);
    border-color: var(--primary-color);
}

.layer-visibility {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0.7;
}

.layer-visibility:hover {
    opacity: 1;
}

.layer-visibility.hidden {
    opacity: 0.3;
}

.layer-icon {
    font-size: 14px;
}

.layer-name {
    flex: 1;
    font-size: 12px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.layer-type {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
}

.layer-delete {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.15s;
}

.layer-item:hover .layer-delete {
    opacity: 1;
}

.layer-delete:hover {
    color: var(--danger-color);
}

/* Layer visibility state */
.layer-visibility.layer-hidden {
    opacity: 0.4;
}

.layer-item.hidden-layer {
    opacity: 0.5;
    background-color: var(--bg-secondary);
}

.layer-item.hidden-layer .layer-name {
    text-decoration: line-through;
    color: var(--text-muted);
}

/* Layer thumbnail */
.layer-thumbnail {
    width: 28px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.layer-thumbnail img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

/* Layer controls (up/down buttons) */
.layer-controls {
    display: flex;
    gap: 2px;
    opacity: 0;
    transition: opacity 0.15s;
}

.layer-item:hover .layer-controls {
    opacity: 1;
}

.layer-btn {
    width: 18px;
    height: 18px;
    padding: 0;
    border: 1px solid var(--border-color);
    background: var(--bg-secondary);
    color: var(--text-muted);
    border-radius: 3px;
    cursor: pointer;
    font-size: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
}

.layer-btn:hover:not(:disabled) {
    background: var(--primary-color);
    border-color: var(--primary-color);
    color: var(--text-color);
}

.layer-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}

/* Import Overlay Cards */
.import-overlay-card {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.15s;
    position: relative;
}

.import-overlay-card:hover {
    border-color: var(--primary-color);
    background: var(--bg-secondary);
}

.import-overlay-card input[type="checkbox"] {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
}

.import-overlay-card.already-added {
    opacity: 0.5;
    cursor: not-allowed;
}

.import-overlay-card.already-added:hover {
    border-color: var(--border-color);
    background: var(--bg-tertiary);
}

.import-overlay-thumbnail {
    width: 40px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: var(--bg-secondary);
    border-radius: 4px;
    overflow: hidden;
}

.import-overlay-thumbnail img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.import-overlay-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.import-overlay-name {
    font-size: 12px;
    font-weight: 500;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.import-overlay-meta {
    display: flex;
    gap: 6px;
    align-items: center;
}

.import-overlay-type {
    font-size: 9px;
    color: var(--text-muted);
    background: var(--bg-secondary);
    padding: 1px 4px;
    border-radius: 2px;
}

.import-overlay-group {
    font-size: 9px;
    color: var(--primary-color);
}

.import-overlay-badge {
    position: absolute;
    top: 4px;
    right: 4px;
    font-size: 8px;
    background: var(--success-color);
    color: #000;
    padding: 1px 4px;
    border-radius: 2px;
    font-weight: 600;
}

/* YAML Editor Panel */
.yaml-editor-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 200px;
}

.yaml-editor {
    flex: 1;
    width: 100%;
    min-height: 150px;
    background-color: #0d0d1a;
    color: #a0d8b0;
    border: none;
    padding: 15px;
    font-family: var(--font-mono);
    font-size: 12px;
    line-height: 1.5;
    resize: none;
}

.yaml-editor:focus {
    outline: none;
}

.yaml-status {
    padding: 6px 15px;
    background-color: var(--bg-tertiary);
    border-top: 1px solid var(--border-color);
    font-size: 11px;
}

.yaml-status .status-text {
    color: var(--text-muted);
}

.yaml-status.error .status-text {
    color: var(--danger-color);
}

.yaml-status.success .status-text {
    color: var(--success-color);
}

/* Add Overlay Dialog */
.add-overlay-modal-content {
    width: 500px;
    max-width: 95vw;
}

.add-overlay-content {
    padding: 20px;
}

.add-overlay-types {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 20px;
}

.add-overlay-type-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 20px 15px;
    background-color: var(--bg-tertiary);
    border: 2px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.add-overlay-type-btn:hover {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.05);
}

.add-overlay-type-btn.active {
    border-color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.15);
}

.add-overlay-type-btn .type-icon {
    font-size: 28px;
}

.add-overlay-type-btn .type-name {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
}

.add-overlay-type-btn .type-desc {
    font-size: 11px;
    color: var(--text-muted);
}

.add-overlay-form {
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}

.form-row {
    display: flex;
    gap: 15px;
}

.form-row .form-group {
    flex: 1;
}

/* ============================================================================
   Overlays Tab Layout Tweaks
   ============================================================================ */

/* Keep standard layout but ensure max-width */
.overlays-panel {
    max-width: 1400px;
}

/* Limit overlay list height so it doesn't take too much space */
.overlay-list-section .overlay-list {
    max-height: 250px;
}

/* Limit media results height */
.poster-source-section .media-results {
    max-height: 280px;
}

/* ============================================================================
   Overlay Hero Section - Main Visual Editor
   ============================================================================ */

.overlays-panel-redesigned {
    max-width: 100%;
    padding: 0;
}

.overlay-hero-section {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    border-radius: 12px;
    padding: 25px;
    margin-bottom: 25px;
}

.overlay-hero-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 25px;
}

.hero-title-group h2 {
    color: var(--primary-color);
    font-size: 24px;
    margin-bottom: 5px;
}

.hero-title-group .section-desc {
    margin-bottom: 0;
    font-size: 14px;
    color: var(--text-muted);
}

.overlay-config-selector {
    display: flex;
    gap: 10px;
    align-items: center;
}

.overlay-config-selector select {
    min-width: 280px;
    padding: 10px 15px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    font-size: 14px;
}

/* Live Preview Layout */
.overlay-live-preview {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 25px;
    min-height: 500px;
}

@media (max-width: 1100px) {
    .overlay-live-preview {
        grid-template-columns: 1fr;
    }
}

/* Live Preview Canvas Area */
.live-preview-canvas-area {
    display: flex;
    flex-direction: column;
    background-color: var(--bg-color);
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid var(--border-color);
}

.live-preview-poster {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    position: relative;
    min-height: 450px;
    overflow: hidden;
}

.live-preview-poster img.poster-image {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 4px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
}

.live-preview-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    color: var(--text-muted);
}

.loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--border-color);
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.live-preview-loading.hidden {
    display: none;
}

.live-preview-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    background-color: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

.preview-media-title {
    font-weight: 600;
    color: var(--text-color);
}

.preview-overlay-count {
    font-size: 13px;
    color: var(--text-muted);
    background-color: var(--bg-tertiary);
    padding: 4px 10px;
    border-radius: 12px;
}

/* Live Preview Sidebar */
.live-preview-sidebar {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.sidebar-section {
    background-color: var(--bg-color);
    border-radius: 8px;
    padding: 15px;
    border: 1px solid var(--border-color);
}

.sidebar-section h4 {
    font-size: 14px;
    color: var(--primary-color);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.sidebar-section h4 .badge {
    font-size: 11px;
}

/* Active Overlays List */
.active-overlays-list {
    max-height: 200px;
    overflow-y: auto;
}

.active-overlay-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 10px;
    background-color: var(--bg-secondary);
    border-radius: 6px;
    margin-bottom: 6px;
    font-size: 13px;
}

.active-overlay-item:last-child {
    margin-bottom: 0;
}

.active-overlay-thumbnail {
    width: 32px;
    height: 24px;
    background-color: var(--bg-tertiary);
    border-radius: 3px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    color: var(--text-muted);
    overflow: hidden;
}

.active-overlay-name {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.active-overlay-type {
    font-size: 10px;
    text-transform: uppercase;
    color: var(--text-muted);
    background-color: var(--bg-tertiary);
    padding: 2px 6px;
    border-radius: 3px;
}

/* Quick Actions */
.quick-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.btn-block {
    width: 100%;
    justify-content: center;
}

/* Collapsible Sidebar Section */
.sidebar-section.collapsible {
    padding: 0;
}

.sidebar-section.collapsible summary {
    padding: 15px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
}

.sidebar-section.collapsible summary h4 {
    margin-bottom: 0;
}

.sidebar-section.collapsible .template-vars-content {
    padding: 0 15px 15px 15px;
}

.sidebar-section.collapsible .template-vars-input {
    width: 100%;
    min-height: 60px;
    margin-bottom: 10px;
}

.sidebar-section.collapsible .template-vars-presets {
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    margin-bottom: 10px;
}

/* Advanced Options Section */
.overlay-advanced-section {
    background-color: var(--bg-secondary);
    border-radius: 8px;
    margin-bottom: 25px;
}

.overlay-advanced-section > details > summary {
    padding: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
}

.overlay-advanced-section > details > summary h3 {
    margin: 0;
    font-size: 16px;
    color: var(--text-color);
}

.overlay-advanced-section .advanced-content {
    padding: 0 20px 20px 20px;
}

.overlay-advanced-section .overlay-groups-section,
.overlay-advanced-section .overlay-list-section,
.overlay-advanced-section .poster-source-section,
.overlay-advanced-section .preview-section,
.overlay-advanced-section .overlay-details-section {
    background-color: var(--bg-color);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    border: 1px solid var(--border-color);
}

.overlay-advanced-section h4 {
    color: var(--primary-color);
    font-size: 14px;
    margin-bottom: 10px;
}

/* Ensure overlay groups section doesn't hide itself */
.overlay-advanced-section .overlay-groups-section {
    display: block;
}

/* Live Preview Error State */
.live-preview-error {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    color: var(--text-muted);
    text-align: center;
}

.live-preview-error span {
    font-size: 48px;
}

.live-preview-error p {
    font-size: 14px;
}

/* Overlay Images Browser - compact when in advanced */
.overlay-advanced-section .overlay-images-section {
    margin-top: 15px;
}

/* Better placeholder text */
.live-preview-sidebar .placeholder-text {
    font-size: 12px;
    color: var(--text-muted);
    text-align: center;
    padding: 10px;
}

/* Scaled down poster for better fit */
.live-preview-poster {
    min-height: 350px;
    max-height: 450px;
}

.live-preview-poster img.poster-image {
    max-height: 420px;
}

/* Overlay Type Selector */
.overlay-type-selector {
    margin-bottom: 15px;
}

.selector-label {
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.overlay-type-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.overlay-type-btn {
    padding: 6px 12px;
    font-size: 12px;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 15px;
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.2s;
}

.overlay-type-btn:hover {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: #000;
}

.overlay-type-btn.loaded {
    border-color: var(--success-color);
}

/* Selected Overlays Section */
.selected-overlays-section {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
}

.overlay-remove-btn {
    width: 20px;
    height: 20px;
    padding: 0;
    background: rgba(255, 100, 100, 0.2);
    border: none;
    border-radius: 50%;
    color: #ff6464;
    font-size: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s;
}

.active-overlay-item:hover .overlay-remove-btn {
    opacity: 1;
}

.overlay-remove-btn:hover {
    background: rgba(255, 100, 100, 0.4);
}

/* Overlay Picker Dialog */
.overlay-picker-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 10px;
}

.overlay-picker-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px 8px;
    background-color: var(--bg-secondary);
    border: 2px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.overlay-picker-item:hover {
    border-color: var(--primary-color);
    background-color: var(--bg-tertiary);
}

.overlay-picker-item.selected {
    border-color: var(--success-color);
    background-color: rgba(76, 175, 80, 0.1);
}

.picker-thumbnail {
    width: 60px;
    height: 45px;
    background-color: var(--bg-tertiary);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 8px;
    overflow: hidden;
}

.picker-thumbnail img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.picker-thumbnail span {
    font-size: 16px;
    color: var(--text-muted);
}

.picker-name {
    font-size: 11px;
    text-align: center;
    color: var(--text-color);
    word-break: break-word;
    line-height: 1.3;
}

.picker-check {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 18px;
    height: 18px;
    background-color: var(--success-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    color: white;
}

/* Ratings Overlay Picker Dialog */
.ratings-config-preview {
    display: flex;
    flex-direction: column;
    gap: 10px;
    padding: 15px;
    background-color: var(--bg-tertiary);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

.rating-badge-preview {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 15px;
    background-color: var(--bg-secondary);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.rating-badge-preview .rating-num {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--primary-color);
    color: #000;
    font-weight: bold;
    font-size: 12px;
    border-radius: 50%;
    flex-shrink: 0;
}

.rating-badge-preview .rating-source {
    font-size: 14px;
    color: var(--text-color);
    font-weight: 500;
}

/* Rating overlay badge on canvas */
.rating-overlay-badge {
    position: absolute;
    width: 160px;
    height: 160px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.6);
    border-radius: 30px;
    padding: 15px;
}

.rating-overlay-badge img {
    max-width: 80px;
    max-height: 60px;
    object-fit: contain;
}

.rating-overlay-badge .rating-text {
    font-size: 18px;
    font-weight: bold;
    color: white;
    margin-top: 5px;
}

/* ============================================================================
   Config Editor - Sidebar Layout (Phase 2)
   ============================================================================ */

/* Grid layout with sidebar */
.config-editor-layout {
    display: grid;
    grid-template-columns: 220px 1fr;
    min-height: 500px;
    border-radius: var(--radius-md);
    overflow: hidden;
}

/* Sidebar Navigation */
.config-sidebar {
    background-color: var(--bg-tertiary);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
}

.config-sidebar-nav {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-2) 0;
}

.config-nav-group {
    margin-bottom: var(--space-3);
}

.config-nav-group-label {
    padding: var(--space-2) var(--space-4);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.config-nav-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    width: 100%;
    padding: var(--space-2) var(--space-4);
    background: none;
    border: none;
    border-left: 3px solid transparent;
    color: var(--text-secondary);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    text-align: left;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.config-nav-item:hover {
    color: var(--text-primary);
    background-color: rgba(255, 255, 255, 0.05);
}

.config-nav-item.active {
    color: var(--primary-color);
    background-color: rgba(229, 160, 13, 0.1);
    border-left-color: var(--primary-color);
}

.config-nav-item .nav-icon {
    font-size: var(--text-md);
    width: 24px;
    text-align: center;
    flex-shrink: 0;
}

.config-nav-item .nav-label {
    flex: 1;
}

.config-nav-item .nav-badge {
    font-size: 10px;
    padding: 2px 6px;
    border-radius: var(--radius-full);
    background: var(--color-error-bg);
    color: var(--color-error);
    font-weight: var(--font-semibold);
}

.config-nav-item .nav-badge.optional {
    background: var(--bg-secondary);
    color: var(--text-muted);
}

.config-nav-item.active .nav-badge {
    background: rgba(229, 160, 13, 0.2);
    color: var(--primary-color);
}

/* Main content area */
.config-content-area {
    background-color: var(--bg-secondary);
    overflow-y: auto;
    max-height: calc(100vh - 280px);
}

/* Mobile: Stack layout */
@media (max-width: 900px) {
    .config-editor-layout {
        grid-template-columns: 1fr;
    }

    .config-sidebar {
        border-right: none;
        border-bottom: 1px solid var(--border-color);
    }

    .config-sidebar-nav {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-1);
        padding: var(--space-2) var(--space-3);
    }

    .config-nav-group {
        display: contents;
    }

    .config-nav-group-label {
        display: none;
    }

    .config-nav-item {
        padding: var(--space-2) var(--space-3);
        border-left: none;
        border-radius: var(--radius-sm);
        flex: 0 0 auto;
    }

    .config-nav-item.active {
        background-color: var(--bg-secondary);
    }

    .config-nav-item .nav-icon {
        display: none;
    }

    .config-content-area {
        max-height: none;
    }
}

/* Legacy horizontal tabs (kept for compatibility) */
.config-subtabs {
    display: none; /* Hidden by default when sidebar is used */
    flex-wrap: wrap;
    gap: 4px;
    padding: 12px 16px;
    background-color: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.config-subtab {
    background: none;
    border: none;
    color: var(--text-muted);
    padding: 8px 16px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 500;
    border-radius: 6px;
    transition: all 0.2s;
}

.config-subtab:hover {
    color: var(--text-color);
    background-color: rgba(255, 255, 255, 0.05);
}

.config-subtab.active {
    color: var(--primary-color);
    background-color: var(--bg-secondary);
}

/* Sub-tab Content Panels */
.config-subtab-content {
    background-color: var(--bg-secondary);
}

.subtab-panel {
    display: none;
    padding: 24px;
}

/* Use higher specificity to override the global .hidden utility class */
.config-subtab-content .subtab-panel.active,
.subtab-panel.active.hidden {
    display: block !important;
}

.subtab-header {
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border-color);
}

.subtab-header h3 {
    color: var(--primary-color);
    font-size: 18px;
    margin-bottom: 8px;
}

.subtab-desc {
    color: var(--text-muted);
    font-size: 14px;
}

.required {
    color: var(--danger-color);
}

.required-note {
    color: var(--primary-color);
    font-weight: 500;
}

/* Enhanced Form Rows */
.form-row {
    display: flex;
    gap: 16px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.form-row.checkboxes {
    gap: 24px;
}

.form-row .form-group {
    flex: 1;
    min-width: 200px;
    margin-bottom: 0;
}

.form-group.flex-1 {
    flex: 1;
}

.form-group.flex-2 {
    flex: 2;
}

/* Checkbox Labels */
.checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 14px;
    color: var(--text-color);
}

.checkbox-label input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--primary-color);
}

/* Form Section Divider */
.form-section-divider {
    height: 1px;
    background-color: var(--border-color);
    margin: 24px 0;
}

.form-section h4 {
    color: var(--text-color);
    font-size: 15px;
    margin-bottom: 8px;
}

.form-hint {
    color: var(--text-muted);
    font-size: 13px;
    margin-bottom: 12px;
}

.warning-text {
    color: var(--warning-color);
    font-size: 11px;
    display: block;
    margin-top: 4px;
}

/* Form Actions (Test Connection buttons) */
.form-actions {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
}

.test-result {
    font-size: 13px;
    font-weight: 500;
}

.test-result.success {
    color: var(--success-color);
}

.test-result.error {
    color: var(--danger-color);
}

.test-result.loading {
    color: var(--text-muted);
}

/* Service Cards */
.service-card {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 20px;
    overflow: hidden;
}

.service-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background-color: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.service-card-header h4 {
    color: var(--primary-color);
    font-size: 16px;
    margin: 0;
}

.service-status {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 12px;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-muted);
}

.service-status.configured {
    background-color: rgba(40, 167, 69, 0.2);
    color: var(--success-color);
}

.service-card-content {
    padding: 20px;
}

.service-desc {
    color: var(--text-muted);
    font-size: 13px;
    margin-bottom: 16px;
}

/* Arr Services Container */
.arr-services-container,
.metadata-services-container,
.list-services-container,
.notifications-container {
    display: grid;
    gap: 20px;
}

@media (min-width: 1200px) {
    .arr-services-container {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Advanced Options Details */
.advanced-options {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
}

.advanced-options summary {
    cursor: pointer;
    color: var(--text-muted);
    font-size: 13px;
    margin-bottom: 12px;
}

.advanced-options summary:hover {
    color: var(--primary-color);
}

.advanced-options[open] summary {
    color: var(--primary-color);
}

/* Auth Status */
.auth-status {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    background-color: rgba(40, 167, 69, 0.1);
    border: 1px solid var(--success-color);
    border-radius: 6px;
    margin-top: 12px;
    font-size: 13px;
}

.auth-status.hidden {
    display: none;
}

.auth-label {
    color: var(--text-muted);
}

.auth-value {
    color: var(--success-color);
    font-weight: 500;
}

/* Settings Groups (Accordion) */
.settings-groups {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.settings-group {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
}

.settings-group summary {
    padding: 14px 20px;
    cursor: pointer;
    background-color: var(--bg-tertiary);
    list-style: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.settings-group summary::-webkit-details-marker {
    display: none;
}

.settings-group summary::after {
    content: '+';
    font-size: 18px;
    color: var(--text-muted);
    transition: transform 0.2s;
}

.settings-group[open] summary::after {
    content: 'âˆ’';
}

.settings-group summary h4 {
    margin: 0;
    color: var(--text-color);
    font-size: 14px;
}

.settings-group summary:hover {
    background-color: rgba(255, 255, 255, 0.03);
}

.settings-group-content {
    padding: 20px;
}

/* Sortable List (Run Order) */
.sortable-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.sortable-list li {
    padding: 12px 16px;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-bottom: 8px;
    cursor: grab;
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 14px;
}

.sortable-list li::before {
    content: 'â˜°';
    color: var(--text-muted);
}

.sortable-list li:hover {
    border-color: var(--primary-color);
}

.sortable-list li.dragging {
    opacity: 0.5;
    cursor: grabbing;
}

/* Range Slider with Value Display */
.form-group input[type="range"] {
    width: 200px;
    vertical-align: middle;
}

.form-group input[type="range"] + span {
    display: inline-block;
    width: 40px;
    text-align: center;
    color: var(--text-muted);
    font-size: 13px;
    margin-left: 8px;
}

/* Libraries Accordion */
.libraries-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.libraries-toolbar {
    display: flex;
    gap: 12px;
    margin-bottom: 8px;
}

.libraries-accordion {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.library-item {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    overflow: hidden;
}

.library-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background-color: var(--bg-tertiary);
    cursor: pointer;
}

.library-item-header:hover {
    background-color: rgba(255, 255, 255, 0.03);
}

.library-name {
    font-weight: 500;
    color: var(--primary-color);
}

.library-type {
    font-size: 12px;
    color: var(--text-muted);
    margin-left: 12px;
}

.library-item-content {
    padding: 20px;
    display: none;
}

.library-item.expanded .library-item-content {
    display: block;
}

.library-item-expand {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 18px;
    cursor: pointer;
    transition: transform 0.2s;
}

.library-item.expanded .library-item-expand {
    transform: rotate(180deg);
}

/* File Lists (Collection/Overlay/Metadata Files) */
.file-list-section {
    margin-bottom: 20px;
}

.file-list-section h5 {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.file-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.file-list-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 14px;
    background-color: var(--bg-tertiary);
    border-radius: 6px;
    font-size: 13px;
    font-family: var(--font-mono);
}

.file-list-item .file-type {
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 4px;
    background-color: var(--primary-color);
    color: #000;
    font-weight: 500;
    text-transform: uppercase;
}

.file-list-item .file-type.default {
    background-color: var(--success-color);
    color: white;
}

.file-list-item .file-path {
    flex: 1;
    color: var(--text-color);
}

.file-list-item .btn-remove {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 4px;
    font-size: 16px;
}

.file-list-item .btn-remove:hover {
    color: var(--danger-color);
}

.add-file-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    background-color: transparent;
    border: 1px dashed var(--border-color);
    border-radius: 6px;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 13px;
    width: 100%;
    transition: all 0.2s;
}

.add-file-btn:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* YAML Editor Container in subtab */
.yaml-editor-container {
    background-color: #0d0d1a;
    border-radius: 8px;
    overflow: hidden;
}

.yaml-editor-container .config-editor {
    min-height: 600px;
}

/* Backups Section (Collapsible) */
details.backups-section {
    margin-top: 24px;
    background-color: var(--bg-secondary);
    border-radius: 8px;
    overflow: hidden;
}

details.backups-section summary {
    padding: 16px 20px;
    cursor: pointer;
    background-color: var(--bg-tertiary);
    list-style: none;
    display: flex;
    align-items: center;
}

details.backups-section summary::-webkit-details-marker {
    display: none;
}

details.backups-section summary::before {
    content: 'â–¶';
    font-size: 10px;
    margin-right: 10px;
    color: var(--text-muted);
    transition: transform 0.2s;
}

details.backups-section[open] summary::before {
    transform: rotate(90deg);
}

details.backups-section summary h3 {
    margin: 0;
    font-size: 14px;
}

details.backups-section .backups-list {
    border-radius: 0;
}

/* Template Variables in Library */
.template-vars-section {
    margin-top: 16px;
}

.template-vars-section h5 {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.template-vars-editor {
    background-color: #0d0d1a;
    border-radius: 6px;
    padding: 12px;
    font-family: var(--font-mono);
    font-size: 13px;
    min-height: 100px;
    resize: vertical;
    width: 100%;
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.template-vars-editor:focus {
    outline: none;
    border-color: var(--primary-color);
}

/* Textarea styling */
.form-group textarea {
    width: 100%;
    padding: 10px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    font-size: 14px;
    font-family: var(--font-mono);
    resize: vertical;
}

.form-group textarea:focus {
    outline: none;
    border-color: var(--primary-color);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .config-subtabs {
        padding: 8px;
    }

    .config-subtab {
        padding: 6px 12px;
        font-size: 12px;
    }

    .subtab-panel {
        padding: 16px;
    }

    .form-row {
        flex-direction: column;
    }

    .form-row .form-group {
        min-width: 100%;
    }

    .service-card-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
}

/* ============================================================================
   Enhanced Settings - Help Text, Wiki Links, Icons
   ============================================================================ */

/* Section Header with Icon and Wiki Link */
.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.section-title {
    display: flex;
    align-items: center;
    gap: 10px;
}

.section-icon {
    font-size: 24px;
    filter: grayscale(0);
}

.section-title h3 {
    color: var(--primary-color);
    font-size: 18px;
    margin: 0;
}

.wiki-link {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    color: var(--text-muted);
    text-decoration: none;
    font-size: 13px;
    padding: 6px 12px;
    border-radius: 6px;
    background-color: rgba(255, 255, 255, 0.05);
    transition: all 0.2s;
}

.wiki-link:hover {
    color: var(--primary-color);
    background-color: rgba(255, 255, 255, 0.1);
}

.wiki-link svg {
    width: 14px;
    height: 14px;
}

/* Section Description */
.section-description {
    color: var(--text-muted);
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 20px;
    padding: 12px 16px;
    background-color: rgba(255, 255, 255, 0.02);
    border-left: 3px solid var(--primary-color);
    border-radius: 0 6px 6px 0;
}

/* Field Help Text */
.field-help {
    display: block;
    color: var(--text-muted);
    font-size: 12px;
    margin-top: 4px;
    line-height: 1.4;
}

.field-help.warning {
    color: var(--warning-color);
}

.field-help.info {
    color: #6aa3d9;
}

/* Info Icon with Tooltip */
.info-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-muted);
    font-size: 11px;
    cursor: help;
    margin-left: 6px;
    position: relative;
}

.info-icon:hover {
    background-color: var(--primary-color);
    color: white;
}

/* Tooltip */
.tooltip-wrapper {
    position: relative;
    display: inline-flex;
    align-items: center;
}

.tooltip {
    visibility: hidden;
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background-color: #1a1a2e;
    color: var(--text-color);
    padding: 10px 14px;
    border-radius: 6px;
    font-size: 12px;
    line-height: 1.5;
    white-space: normal;
    width: max-content;
    max-width: 280px;
    z-index: 1000;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
    opacity: 0;
    transition: opacity 0.2s, visibility 0.2s;
}

.tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: #1a1a2e;
}

.tooltip-wrapper:hover .tooltip {
    visibility: visible;
    opacity: 1;
}

/* Label with Info Icon */
.label-with-info {
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

/* Default Value Badge */
.default-badge {
    display: inline-block;
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-muted);
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 8px;
    font-weight: normal;
}

/* Settings Group with Icon */
.settings-group > summary {
    display: flex;
    align-items: center;
    gap: 10px;
}

.settings-group > summary h4 {
    display: flex;
    align-items: center;
    gap: 8px;
}

.group-icon {
    font-size: 16px;
    filter: grayscale(0);
}

/* Service Card Icon */
.service-card-header h4 {
    display: flex;
    align-items: center;
    gap: 10px;
}

.service-icon {
    width: 24px;
    height: 24px;
    object-fit: contain;
}

/* Key/Value Pair Display */
.key-value-hint {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted);
    font-size: 12px;
    margin-top: 8px;
}

.key-value-hint code {
    background-color: rgba(255, 255, 255, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: monospace;
    font-size: 11px;
}

/* Feature Status Indicators */
.feature-status {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 12px;
}

.feature-status.required {
    background-color: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.feature-status.optional {
    background-color: rgba(34, 197, 94, 0.2);
    color: #22c55e;
}

.feature-status.recommended {
    background-color: rgba(234, 179, 8, 0.2);
    color: #eab308;
}

/* Inline Link */
.inline-link {
    color: var(--primary-color);
    text-decoration: none;
}

.inline-link:hover {
    text-decoration: underline;
}

/* Info Box */
.info-box {
    display: flex;
    gap: 12px;
    padding: 14px 16px;
    background-color: rgba(106, 163, 217, 0.1);
    border: 1px solid rgba(106, 163, 217, 0.3);
    border-radius: 8px;
    margin-bottom: 20px;
}

.info-box.warning {
    background-color: rgba(234, 179, 8, 0.1);
    border-color: rgba(234, 179, 8, 0.3);
}

.info-box.danger {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
}

.info-box-icon {
    font-size: 20px;
    flex-shrink: 0;
}

.info-box-content {
    font-size: 13px;
    line-height: 1.5;
    color: var(--text-muted);
}

.info-box-content strong {
    color: var(--text-color);
}

/* Grouped Checkboxes with Descriptions */
.checkbox-with-desc {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 10px 14px;
    background-color: rgba(255, 255, 255, 0.02);
    border-radius: 6px;
    flex: 1;
    min-width: 200px;
}

.checkbox-with-desc .checkbox-label {
    font-weight: 500;
}

.checkbox-with-desc .checkbox-desc {
    color: var(--text-muted);
    font-size: 11px;
    margin-left: 24px;
    line-height: 1.4;
}

/* External Link Icon */
.external-link-icon {
    display: inline-block;
    width: 12px;
    height: 12px;
    margin-left: 4px;
    vertical-align: middle;
    opacity: 0.6;
}

/* ============================================================================
   Enhanced Library Configuration Styles
   ============================================================================ */

/* Library Reference Grid */
.library-reference-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 12px;
}

.reference-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding: 10px 14px;
    background-color: rgba(255, 255, 255, 0.02);
    border-radius: 6px;
    border-left: 3px solid var(--primary-color);
}

.reference-item strong {
    color: var(--text-color);
    font-family: monospace;
    font-size: 13px;
}

.reference-item .field-help {
    margin-top: 0;
}

/* Enhanced Library Item */
.library-item {
    background-color: var(--bg-tertiary);
    border-radius: 8px;
    margin-bottom: 12px;
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.library-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.library-item-header:hover {
    background-color: rgba(255, 255, 255, 0.03);
}

.library-item-header-left {
    display: flex;
    align-items: center;
    gap: 12px;
}

.library-icon {
    font-size: 24px;
}

.library-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.library-name {
    font-weight: 600;
    color: var(--text-color);
    font-size: 15px;
}

.library-stats {
    display: flex;
    gap: 12px;
    font-size: 12px;
    color: var(--text-muted);
}

.library-stat {
    display: flex;
    align-items: center;
    gap: 4px;
}

.library-stat-icon {
    font-size: 12px;
}

.library-badges {
    display: flex;
    gap: 6px;
    margin-left: auto;
    margin-right: 12px;
}

.library-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
}

.library-badge.collections {
    background-color: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

.library-badge.overlays {
    background-color: rgba(168, 85, 247, 0.2);
    color: #c084fc;
}

.library-badge.metadata {
    background-color: rgba(34, 197, 94, 0.2);
    color: #4ade80;
}

.library-badge.operations {
    background-color: rgba(234, 179, 8, 0.2);
    color: #facc15;
}

.library-item-expand {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: transform 0.2s;
    padding: 4px 8px;
}

.library-item.expanded .library-item-expand {
    transform: rotate(180deg);
}

.library-item-content {
    display: none;
    padding: 0 18px 18px;
    border-top: 1px solid var(--border-color);
}

.library-item.expanded .library-item-content {
    display: block;
}

/* Library Content Tabs */
.library-tabs {
    display: flex;
    gap: 2px;
    margin: 16px 0 12px;
    background-color: var(--bg-secondary);
    padding: 4px;
    border-radius: 6px;
}

.library-tab {
    flex: 1;
    background: none;
    border: none;
    color: var(--text-muted);
    padding: 8px 12px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    border-radius: 4px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}

.library-tab:hover {
    color: var(--text-color);
    background-color: rgba(255, 255, 255, 0.05);
}

.library-tab.active {
    color: var(--primary-color);
    background-color: var(--bg-tertiary);
}

.library-tab-icon {
    font-size: 14px;
}

.library-tab-panel {
    display: none;
}

.library-tab-panel.active {
    display: block;
}

/* File List Enhancements */
.file-list-section {
    margin-bottom: 16px;
}

.file-list-section h5 {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-muted);
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--border-color);
}

.file-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.file-list-item {
    display: flex;
    flex-direction: column;
    gap: 0;
    padding: 10px 12px;
    background-color: var(--bg-secondary);
    border-radius: 6px;
    font-size: 13px;
    transition: all 0.2s;
    border: 1px solid transparent;
}

.file-list-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
    border-color: var(--border-color);
}

.file-list-item.is-default {
    border-left: 3px solid rgba(59, 130, 246, 0.5);
}

.file-list-item.has-vars {
    cursor: default;
}

.file-item-main {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    flex: 1;
    min-width: 0;
}

.file-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
    flex: 1;
}

.file-item-actions {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.file-type {
    font-size: 10px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 4px;
    text-transform: uppercase;
    flex-shrink: 0;
    margin-top: 2px;
}

.file-type.default {
    background-color: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

.file-type:not(.default) {
    background-color: rgba(234, 179, 8, 0.15);
    color: #fbbf24;
}

.file-type.git {
    background-color: rgba(239, 68, 68, 0.2);
    color: #f87171;
}

.file-type.url {
    background-color: rgba(34, 197, 94, 0.2);
    color: #4ade80;
}

.file-path {
    color: var(--text-color);
    font-family: monospace;
    font-size: 13px;
    font-weight: 500;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.file-description {
    font-size: 11px;
    color: var(--text-muted);
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.file-vars-badge {
    font-size: 10px;
    padding: 4px 8px;
    background-color: rgba(139, 92, 246, 0.2);
    color: #a78bfa;
    border-radius: 10px;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
}

.file-vars-badge:hover {
    background-color: rgba(139, 92, 246, 0.3);
}

.file-item-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    width: 100%;
}

/* Template Variables Panel */
.file-vars-panel {
    margin-top: 12px;
    padding: 12px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 6px;
    border: 1px solid var(--border-color);
}

.file-vars-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-color);
    font-size: 12px;
    font-weight: 600;
    color: var(--text-muted);
}

.file-vars-header .btn-small {
    font-size: 10px;
    padding: 3px 8px;
    background-color: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.file-vars-header .btn-small:hover {
    background-color: rgba(59, 130, 246, 0.3);
}

.file-vars-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 8px;
}

.file-var-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 10px;
    background-color: var(--bg-secondary);
    border-radius: 4px;
    font-size: 11px;
}

.var-key {
    color: #a78bfa;
    font-family: monospace;
    font-weight: 500;
}

.var-value {
    color: var(--text-color);
    font-family: monospace;
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.var-value.var-true {
    color: #4ade80;
}

.var-value.var-false {
    color: #f87171;
}

/* Variable help icon */
.var-help-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 14px;
    height: 14px;
    font-size: 9px;
    font-weight: 600;
    color: var(--text-muted);
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    margin-left: 4px;
    cursor: help;
    flex-shrink: 0;
}

.file-var-item:hover .var-help-icon {
    background-color: rgba(59, 130, 246, 0.3);
    color: #60a5fa;
}

/* Enhanced variable item with tooltip */
.file-var-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 10px;
    background-color: var(--bg-secondary);
    border-radius: 4px;
    font-size: 11px;
    cursor: default;
    position: relative;
    transition: all 0.2s;
}

.file-var-item:hover {
    background-color: rgba(255, 255, 255, 0.08);
}

.file-var-item[title]:hover::after {
    content: attr(title);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background-color: #1a1a2e;
    color: var(--text-color);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 11px;
    white-space: normal;
    max-width: 280px;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border: 1px solid var(--border-color);
    line-height: 1.4;
    text-align: left;
    pointer-events: none;
}

.file-var-item[title]:hover::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: var(--border-color);
    z-index: 101;
}

/* Template Variables Modal */
.template-vars-modal {
    max-width: 600px;
}

.template-vars-textarea {
    width: 100%;
    min-height: 300px;
    padding: 12px;
    font-family: monospace;
    font-size: 12px;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    resize: vertical;
    line-height: 1.5;
}

.template-vars-textarea:focus {
    outline: none;
    border-color: var(--primary-color);
}

.error-message {
    margin-top: 10px;
    padding: 10px;
    background-color: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 6px;
    color: #f87171;
    font-size: 12px;
}

/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
}

.modal-content {
    background-color: var(--bg-primary);
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
}

.modal-header h3 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
}

.modal-close {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 20px;
    cursor: pointer;
    padding: 4px;
    line-height: 1;
}

.modal-close:hover {
    color: var(--text-color);
}

.modal-body {
    padding: 20px;
    overflow-y: auto;
    flex: 1;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding: 16px 20px;
    border-top: 1px solid var(--border-color);
}

.file-remove-btn {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s;
}

.file-remove-btn:hover {
    color: var(--danger-color);
    background-color: rgba(239, 68, 68, 0.1);
}

.add-file-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: none;
    border: 1px dashed var(--border-color);
    color: var(--text-muted);
    padding: 8px 14px;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    margin-top: 8px;
    transition: all 0.2s;
}

.add-file-btn:hover {
    color: var(--primary-color);
    border-color: var(--primary-color);
    background-color: rgba(59, 130, 246, 0.05);
}

/* Library Settings Section */
.library-settings-section {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
}

.library-settings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 12px;
}

.library-setting-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.library-setting-item label {
    font-size: 12px;
    color: var(--text-muted);
}

.library-setting-item input,
.library-setting-item select {
    padding: 6px 10px;
    font-size: 13px;
}

/* Operations Display */
.operations-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
}

.operation-tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 10px;
    background-color: rgba(234, 179, 8, 0.15);
    color: #fbbf24;
    border-radius: 12px;
    font-size: 12px;
    font-family: monospace;
}

.operation-tag .op-value {
    color: var(--text-muted);
    font-family: inherit;
}

/* Template Variables Editor */
.template-vars-section {
    margin-top: 16px;
}

.template-vars-editor {
    width: 100%;
    min-height: 80px;
    padding: 10px;
    font-family: monospace;
    font-size: 12px;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    color: var(--text-color);
    resize: vertical;
}

.template-vars-editor:focus {
    outline: none;
    border-color: var(--primary-color);
}

/* Library Actions */
.library-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border-color);
}

.library-quick-actions {
    display: flex;
    gap: 8px;
}

.library-quick-action {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background-color: rgba(255, 255, 255, 0.05);
    border: none;
    border-radius: 6px;
    color: var(--text-muted);
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.library-quick-action:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: var(--text-color);
}

/* ===========================================
   DESIGN SYSTEM COMPONENTS (Phase 1)
   See docs/STYLE_GUIDE.md for details
   =========================================== */

/* -------------------------------------------
   TOAST NOTIFICATIONS
   ------------------------------------------- */
.toast-container {
    position: fixed;
    bottom: var(--space-5);
    right: var(--space-5);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    max-width: 400px;
    pointer-events: none;
}

.toast {
    display: flex;
    align-items: flex-start;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-left: 4px solid var(--color-info);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    animation: toast-slide-in 200ms ease;
    pointer-events: auto;
}

.toast.toast-success {
    border-left-color: var(--color-success);
}

.toast.toast-warning {
    border-left-color: var(--color-warning);
}

.toast.toast-error {
    border-left-color: var(--color-error);
}

.toast.toast-info {
    border-left-color: var(--color-info);
}

.toast-icon {
    flex-shrink: 0;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-md);
}

.toast-success .toast-icon { color: var(--color-success); }
.toast-warning .toast-icon { color: var(--color-warning); }
.toast-error .toast-icon { color: var(--color-error); }
.toast-info .toast-icon { color: var(--color-info); }

.toast-content {
    flex: 1;
    min-width: 0;
}

.toast-title {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--space-1);
}

.toast-message {
    font-size: var(--text-sm);
    color: var(--text-secondary);
    line-height: var(--leading-normal);
}

.toast-close {
    flex-shrink: 0;
    padding: var(--space-1);
    background: transparent;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: color var(--transition-fast), background var(--transition-fast);
}

.toast-close:hover {
    color: var(--text-primary);
    background: var(--bg-tertiary);
}

.toast.toast-exiting {
    animation: toast-slide-out 150ms ease forwards;
}

@keyframes toast-slide-in {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes toast-slide-out {
    from {
        opacity: 1;
        transform: translateX(0);
    }
    to {
        opacity: 0;
        transform: translateX(100%);
    }
}

/* -------------------------------------------
   SKELETON LOADERS
   ------------------------------------------- */
.skeleton {
    background: linear-gradient(
        90deg,
        var(--bg-tertiary) 25%,
        var(--bg-elevated) 50%,
        var(--bg-tertiary) 75%
    );
    background-size: 200% 100%;
    animation: skeleton-shimmer 1.5s infinite;
    border-radius: var(--radius-sm);
}

.skeleton-text {
    height: 16px;
    width: 80%;
    margin-bottom: var(--space-2);
}

.skeleton-text-sm {
    height: 12px;
    width: 60%;
}

.skeleton-text-lg {
    height: 20px;
    width: 70%;
}

.skeleton-input {
    height: 40px;
    width: 100%;
}

.skeleton-button {
    height: 36px;
    width: 100px;
    border-radius: var(--radius-sm);
}

.skeleton-card {
    height: 120px;
    width: 100%;
    border-radius: var(--radius-md);
}

.skeleton-avatar {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
}

.skeleton-thumbnail {
    width: 80px;
    height: 120px;
    border-radius: var(--radius-sm);
}

@keyframes skeleton-shimmer {
    0% {
        background-position: 200% 0;
    }
    100% {
        background-position: -200% 0;
    }
}

/* Skeleton row for loading lists */
.skeleton-row {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
}

.skeleton-row .skeleton-avatar {
    flex-shrink: 0;
}

.skeleton-row-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

/* -------------------------------------------
   FOCUS VISIBLE STYLES
   ------------------------------------------- */
/* Remove default focus for mouse users */
:focus {
    outline: none;
}

/* Show focus ring for keyboard users */
:focus-visible {
    outline: none;
    box-shadow: var(--shadow-focus);
}

/* Specific focus styles for different elements */
.btn:focus-visible {
    box-shadow: var(--shadow-focus);
}

.form-group input:focus-visible,
.form-group select:focus-visible,
.form-group textarea:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    border-color: var(--primary-color);
    box-shadow: var(--shadow-focus);
}

.nav-tab:focus-visible,
.config-subtab:focus-visible {
    box-shadow: var(--shadow-focus);
    border-radius: var(--radius-sm);
}

/* Focus for checkboxes */
input[type="checkbox"]:focus-visible {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
    box-shadow: none;
}

/* Skip link for accessibility */
.skip-link {
    position: absolute;
    top: -100px;
    left: var(--space-4);
    padding: var(--space-2) var(--space-4);
    background: var(--primary-color);
    color: var(--text-inverse);
    border-radius: var(--radius-sm);
    z-index: 10000;
    font-weight: var(--font-medium);
    text-decoration: none;
    transition: top var(--transition-fast);
}

.skip-link:focus {
    top: var(--space-4);
}

/* -------------------------------------------
   UTILITY CLASSES
   ------------------------------------------- */
/* Display */
.hidden { display: none !important; }
.block { display: block; }
.inline { display: inline; }
.inline-block { display: inline-block; }
.flex { display: flex; }
.inline-flex { display: inline-flex; }
.grid { display: grid; }

/* Flexbox */
.flex-row { flex-direction: row; }
.flex-col { flex-direction: column; }
.flex-wrap { flex-wrap: wrap; }
.items-start { align-items: flex-start; }
.items-center { align-items: center; }
.items-end { align-items: flex-end; }
.justify-start { justify-content: flex-start; }
.justify-center { justify-content: center; }
.justify-end { justify-content: flex-end; }
.justify-between { justify-content: space-between; }
.flex-1 { flex: 1; }
.flex-2 { flex: 2; }
.flex-shrink-0 { flex-shrink: 0; }
.flex-grow { flex-grow: 1; }

/* Gap */
.gap-1 { gap: var(--space-1); }
.gap-2 { gap: var(--space-2); }
.gap-3 { gap: var(--space-3); }
.gap-4 { gap: var(--space-4); }
.gap-5 { gap: var(--space-5); }
.gap-6 { gap: var(--space-6); }

/* Margin */
.m-0 { margin: 0; }
.m-1 { margin: var(--space-1); }
.m-2 { margin: var(--space-2); }
.m-3 { margin: var(--space-3); }
.m-4 { margin: var(--space-4); }
.m-5 { margin: var(--space-5); }

.mt-0 { margin-top: 0; }
.mt-1 { margin-top: var(--space-1); }
.mt-2 { margin-top: var(--space-2); }
.mt-3 { margin-top: var(--space-3); }
.mt-4 { margin-top: var(--space-4); }
.mt-5 { margin-top: var(--space-5); }

.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: var(--space-1); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-5 { margin-bottom: var(--space-5); }

.ml-0 { margin-left: 0; }
.ml-1 { margin-left: var(--space-1); }
.ml-2 { margin-left: var(--space-2); }
.ml-3 { margin-left: var(--space-3); }
.ml-4 { margin-left: var(--space-4); }

.mr-0 { margin-right: 0; }
.mr-1 { margin-right: var(--space-1); }
.mr-2 { margin-right: var(--space-2); }
.mr-3 { margin-right: var(--space-3); }
.mr-4 { margin-right: var(--space-4); }

/* Padding */
.p-0 { padding: 0; }
.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-5 { padding: var(--space-5); }

.pt-0 { padding-top: 0; }
.pt-1 { padding-top: var(--space-1); }
.pt-2 { padding-top: var(--space-2); }
.pt-3 { padding-top: var(--space-3); }
.pt-4 { padding-top: var(--space-4); }

.pb-0 { padding-bottom: 0; }
.pb-1 { padding-bottom: var(--space-1); }
.pb-2 { padding-bottom: var(--space-2); }
.pb-3 { padding-bottom: var(--space-3); }
.pb-4 { padding-bottom: var(--space-4); }

.px-0 { padding-left: 0; padding-right: 0; }
.px-1 { padding-left: var(--space-1); padding-right: var(--space-1); }
.px-2 { padding-left: var(--space-2); padding-right: var(--space-2); }
.px-3 { padding-left: var(--space-3); padding-right: var(--space-3); }
.px-4 { padding-left: var(--space-4); padding-right: var(--space-4); }

.py-0 { padding-top: 0; padding-bottom: 0; }
.py-1 { padding-top: var(--space-1); padding-bottom: var(--space-1); }
.py-2 { padding-top: var(--space-2); padding-bottom: var(--space-2); }
.py-3 { padding-top: var(--space-3); padding-bottom: var(--space-3); }
.py-4 { padding-top: var(--space-4); padding-bottom: var(--space-4); }

/* Typography */
.text-xs { font-size: var(--text-xs); }
.text-sm { font-size: var(--text-sm); }
.text-base { font-size: var(--text-base); }
.text-md { font-size: var(--text-md); }
.text-lg { font-size: var(--text-lg); }
.text-xl { font-size: var(--text-xl); }

.font-normal { font-weight: var(--font-normal); }
.font-medium { font-weight: var(--font-medium); }
.font-semibold { font-weight: var(--font-semibold); }
.font-bold { font-weight: var(--font-bold); }

.text-primary { color: var(--text-primary); }
.text-secondary { color: var(--text-secondary); }
.text-muted { color: var(--text-muted); }
.text-success { color: var(--color-success); }
.text-warning { color: var(--color-warning); }
.text-error { color: var(--color-error); }
.text-info { color: var(--color-info); }

.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }

.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.whitespace-nowrap { white-space: nowrap; }
.break-words { word-wrap: break-word; }

/* Width */
.w-full { width: 100%; }
.w-auto { width: auto; }
.max-w-sm { max-width: var(--container-sm); }
.max-w-md { max-width: var(--container-md); }
.max-w-lg { max-width: var(--container-lg); }
.max-w-xl { max-width: var(--container-xl); }

/* Border radius */
.rounded-sm { border-radius: var(--radius-sm); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-full { border-radius: var(--radius-full); }

/* Opacity */
.opacity-50 { opacity: 0.5; }
.opacity-75 { opacity: 0.75; }

/* Cursor */
.cursor-pointer { cursor: pointer; }
.cursor-not-allowed { cursor: not-allowed; }

/* Positioning */
.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }

/* -------------------------------------------
   IMPROVED STATUS BADGES
   ------------------------------------------- */
.status-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-2);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    border-radius: var(--radius-full);
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

.status-badge .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: currentColor;
}

.status-badge.status-connected,
.status-badge.status-success {
    background: var(--color-success-bg);
    color: var(--color-success);
}

.status-badge.status-error,
.status-badge.status-disconnected {
    background: var(--color-error-bg);
    color: var(--color-error);
}

.status-badge.status-warning {
    background: var(--color-warning-bg);
    color: var(--color-warning);
}

.status-badge.status-info {
    background: var(--color-info-bg);
    color: var(--color-info);
}

/* -------------------------------------------
   IMPROVED EMPTY STATES
   ------------------------------------------- */
.empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-8);
    text-align: center;
}

.empty-state-icon {
    font-size: 48px;
    margin-bottom: var(--space-4);
    opacity: 0.5;
}

.empty-state h3 {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--space-2);
}

.empty-state p {
    font-size: var(--text-base);
    color: var(--text-secondary);
    margin-bottom: var(--space-4);
    max-width: 400px;
}

/* -------------------------------------------
   SPINNER (improved)
   ------------------------------------------- */
.spinner {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-color);
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

.spinner-sm {
    width: 16px;
    height: 16px;
}

.spinner-lg {
    width: 32px;
    height: 32px;
    border-width: 3px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* ===========================================
   PHASE 2: ENHANCED COMPONENTS
   =========================================== */

/* -------------------------------------------
   ENHANCED SERVICE CARDS (override existing)
   ------------------------------------------- */
.service-card {
    background-color: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    margin-bottom: var(--space-4);
    overflow: hidden;
    transition: border-color var(--transition-normal), box-shadow var(--transition-normal);
}

.service-card:hover {
    border-color: var(--border-strong);
    box-shadow: var(--shadow-sm);
}

.service-card.is-configured {
    border-color: var(--color-success);
}

/* -------------------------------------------
   FORM VALIDATION STATES
   ------------------------------------------- */
/* Success state */
.form-group.is-valid input,
.form-group.is-valid select,
.form-group.is-valid textarea {
    border-color: var(--color-success);
}

.form-group.is-valid input:focus,
.form-group.is-valid select:focus,
.form-group.is-valid textarea:focus {
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
}

/* Error state */
.form-group.is-invalid input,
.form-group.is-invalid select,
.form-group.is-invalid textarea {
    border-color: var(--color-error);
    background-color: var(--color-error-bg);
}

.form-group.is-invalid input:focus,
.form-group.is-invalid select:focus,
.form-group.is-invalid textarea:focus {
    box-shadow: var(--shadow-focus-error);
}

/* Validation messages */
.form-feedback {
    display: none;
    font-size: var(--text-sm);
    margin-top: var(--space-1);
}

.form-group.is-valid .form-feedback.valid-feedback,
.form-group.is-invalid .form-feedback.invalid-feedback {
    display: block;
}

.valid-feedback {
    color: var(--color-success);
}

.invalid-feedback {
    color: var(--color-error);
}

/* Input wrapper for validation icons */
.input-wrapper {
    position: relative;
}

.input-wrapper input,
.input-wrapper select {
    padding-right: var(--space-8);
}

.form-group.is-valid .input-wrapper::after {
    content: 'âœ“';
    position: absolute;
    right: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-success);
    font-size: var(--text-md);
}

.form-group.is-invalid .input-wrapper::after {
    content: '!';
    position: absolute;
    right: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-error);
    font-weight: var(--font-bold);
    font-size: var(--text-md);
}

/* -------------------------------------------
   IMPROVED BUTTON CONSISTENCY
   ------------------------------------------- */
.btn:active:not(:disabled) {
    transform: translateY(1px);
}

.btn-primary:hover:not(:disabled) {
    background-color: var(--primary-hover);
    box-shadow: var(--shadow-md);
}

.btn-primary:active:not(:disabled) {
    background-color: var(--primary-active);
}

.btn-secondary:hover:not(:disabled) {
    background-color: var(--bg-elevated);
    border-color: var(--border-strong);
}

.btn-ghost {
    background-color: transparent;
    color: var(--text-secondary);
    border-color: transparent;
}

.btn-ghost:hover:not(:disabled) {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
}

/* Loading button state */
.btn.is-loading {
    position: relative;
    color: transparent !important;
    pointer-events: none;
}

.btn.is-loading::after {
    content: '';
    position: absolute;
    width: 16px;
    height: 16px;
    border: 2px solid currentColor;
    border-right-color: transparent;
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
}

.btn-primary.is-loading::after {
    border-color: var(--text-inverse);
    border-right-color: transparent;
}

/* -------------------------------------------
   FOCUS RING FOR SIDEBAR NAV
   ------------------------------------------- */
.config-nav-item:focus-visible {
    outline: none;
    box-shadow: inset var(--shadow-focus);
}

/* ===========================================
   PHASE 3: FEATURE ENHANCEMENTS
   =========================================== */

/* -------------------------------------------
   LIVE YAML PREVIEW PANEL
   ------------------------------------------- */
.config-editor-layout.with-preview {
    grid-template-columns: 220px 1fr 380px;
}

.yaml-preview-panel {
    display: none;
    flex-direction: column;
    background-color: var(--bg-base);
    border-left: 1px solid var(--border-color);
    overflow: hidden;
}

.yaml-preview-panel.active {
    display: flex;
}

.yaml-preview-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-4);
    background-color: var(--bg-tertiary);
    border-bottom: 1px solid var(--border-color);
}

.yaml-preview-header h4 {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin: 0;
}

.yaml-preview-header .preview-badge {
    font-size: var(--text-xs);
    padding: 2px 6px;
    border-radius: var(--radius-full);
    background: var(--color-success-bg);
    color: var(--color-success);
}

.yaml-preview-actions {
    display: flex;
    gap: var(--space-2);
}

.yaml-preview-content {
    flex: 1;
    overflow: auto;
    padding: var(--space-3);
}

.yaml-preview-code {
    font-family: var(--font-mono);
    font-size: 12px;
    line-height: 1.6;
    color: var(--text-primary);
    white-space: pre;
    margin: 0;
}

/* Syntax highlighting for YAML */
.yaml-preview-code .yaml-key {
    color: #7dd3fc; /* cyan */
}

.yaml-preview-code .yaml-value {
    color: #fde68a; /* yellow */
}

.yaml-preview-code .yaml-string {
    color: #86efac; /* green */
}

.yaml-preview-code .yaml-comment {
    color: var(--text-muted);
    font-style: italic;
}

.yaml-preview-code .yaml-number {
    color: #c4b5fd; /* purple */
}

.yaml-preview-code .yaml-boolean {
    color: #fca5a5; /* red */
}

/* Toggle button in sidebar footer */
.config-sidebar-footer {
    padding: var(--space-3) var(--space-4);
    border-top: 1px solid var(--border-color);
    background-color: var(--bg-secondary);
}

.btn-toggle-preview {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    width: 100%;
    padding: var(--space-2) var(--space-3);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    font-size: var(--text-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-toggle-preview:hover {
    background: var(--bg-elevated);
    color: var(--text-primary);
}

.btn-toggle-preview.active {
    background: rgba(229, 160, 13, 0.1);
    border-color: var(--primary-color);
    color: var(--primary-color);
}

/* Responsive: hide preview on smaller screens */
@media (max-width: 1200px) {
    .config-editor-layout.with-preview {
        grid-template-columns: 220px 1fr;
    }

    .yaml-preview-panel {
        display: none !important;
    }

    .btn-toggle-preview {
        display: none;
    }
}

@media (max-width: 900px) {
    .config-editor-layout.with-preview {
        grid-template-columns: 1fr;
    }
}

/* -------------------------------------------
   STATUS DASHBOARD
   ------------------------------------------- */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-4);
    margin-bottom: var(--space-5);
}

.dashboard-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--space-5);
    transition: border-color var(--transition-normal), box-shadow var(--transition-normal);
}

.dashboard-card:hover {
    border-color: var(--border-strong);
    box-shadow: var(--shadow-sm);
}

.dashboard-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-3);
}

.dashboard-card-title {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-md);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
}

.dashboard-card-title .card-icon {
    font-size: var(--text-lg);
}

.dashboard-card-status {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
    background: var(--bg-tertiary);
    color: var(--text-muted);
}

.dashboard-card-status::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: currentColor;
}

.dashboard-card-status.status-ok {
    background: var(--color-success-bg);
    color: var(--color-success);
}

.dashboard-card-status.status-warning {
    background: var(--color-warning-bg);
    color: var(--color-warning);
}

.dashboard-card-status.status-error {
    background: var(--color-error-bg);
    color: var(--color-error);
}

.dashboard-card-content {
    color: var(--text-secondary);
    font-size: var(--text-sm);
}

.dashboard-card-content .stat-value {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
}

.dashboard-card-content .stat-label {
    color: var(--text-muted);
    font-size: var(--text-sm);
}

.dashboard-card-footer {
    margin-top: var(--space-4);
    padding-top: var(--space-3);
    border-top: 1px solid var(--border-subtle);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.dashboard-card-footer .meta {
    font-size: var(--text-xs);
    color: var(--text-muted);
}

/* Quick stats row */
.quick-stats {
    display: flex;
    gap: var(--space-4);
    flex-wrap: wrap;
}

.quick-stat {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.quick-stat-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    font-size: var(--text-md);
}

.quick-stat-value {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
}

.quick-stat-label {
    font-size: var(--text-xs);
    color: var(--text-muted);
}

/* -------------------------------------------
   IMPROVED RUN TAB
   ------------------------------------------- */
.run-hero {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-6);
    margin-bottom: var(--space-5);
    text-align: center;
}

.run-hero h2 {
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
    margin-bottom: var(--space-2);
}

.run-hero p {
    color: var(--text-secondary);
    margin-bottom: var(--space-5);
}

.run-checklist {
    display: flex;
    justify-content: center;
    gap: var(--space-4);
    margin-bottom: var(--space-5);
    flex-wrap: wrap;
}

.run-check-item {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background: var(--bg-primary);
    border-radius: var(--radius-full);
    font-size: var(--text-sm);
}

.run-check-item.check-ok {
    color: var(--color-success);
}

.run-check-item.check-ok::before {
    content: 'âœ“';
    font-weight: bold;
}

.run-check-item.check-pending {
    color: var(--text-muted);
}

.run-check-item.check-pending::before {
    content: 'â—‹';
}

.run-check-item.check-error {
    color: var(--color-error);
}

.run-check-item.check-error::before {
    content: 'âœ—';
}

.run-buttons {
    display: flex;
    justify-content: center;
    gap: var(--space-4);
    flex-wrap: wrap;
}

.run-button-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-5);
    background: var(--bg-primary);
    border: 2px solid var(--border-color);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-normal);
    min-width: 200px;
}

.run-button-card:hover:not(.disabled) {
    border-color: var(--primary-color);
    box-shadow: var(--shadow-md);
}

.run-button-card.disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.run-button-card .run-icon {
    font-size: 32px;
}

.run-button-card .run-title {
    font-size: var(--text-md);
    font-weight: var(--font-semibold);
    color: var(--text-primary);
}

.run-button-card .run-desc {
    font-size: var(--text-sm);
    color: var(--text-muted);
    text-align: center;
}

.run-button-card.primary {
    border-color: var(--primary-color);
    background: rgba(229, 160, 13, 0.05);
}

.run-button-card.danger {
    border-color: var(--color-error);
    background: rgba(239, 68, 68, 0.05);
}

/* -------------------------------------------
   CONNECTION STATUS IN SIDEBAR
   ------------------------------------------- */
.sidebar-status-section {
    padding: var(--space-3) var(--space-4);
    border-top: 1px solid var(--border-color);
    margin-top: auto;
}

.sidebar-status-title {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: var(--space-2);
}

.sidebar-status-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-1) 0;
    font-size: var(--text-sm);
}

.sidebar-status-item .status-name {
    color: var(--text-secondary);
}

.sidebar-status-item .status-indicator {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--text-xs);
}

.sidebar-status-item .status-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--text-muted);
}

.sidebar-status-item .status-dot.connected {
    background: var(--color-success);
}

.sidebar-status-item .status-dot.disconnected {
    background: var(--color-error);
}

/* ==========================================================================
   Phase 4: Micro-animations & Polish
   ========================================================================== */

/* Smooth transitions for interactive elements */
.btn,
.config-nav-item,
.service-card,
.card,
.form-control,
.form-select,
.yaml-preview-panel,
.toast {
    transition: all 0.2s ease;
}

/* Button hover lift effect */
.btn-primary:hover,
.btn-success:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

.btn-primary:active,
.btn-success:active {
    transform: translateY(0);
}

/* Card hover lift */
.service-card:hover,
.card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

/* Nav item slide indicator */
.config-nav-item {
    position: relative;
}

.config-nav-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%) scaleY(0);
    width: 3px;
    height: 60%;
    background: var(--accent);
    border-radius: 0 2px 2px 0;
    transition: transform 0.2s ease;
}

.config-nav-item:hover::before {
    transform: translateY(-50%) scaleY(0.5);
}

.config-nav-item.active::before {
    transform: translateY(-50%) scaleY(1);
}

/* Status dot pulse animation */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.status-dot.connected {
    animation: pulse 2s ease-in-out infinite;
}

/* Form focus glow */
.form-control:focus,
.form-select:focus {
    box-shadow: var(--shadow-focus);
    border-color: var(--accent);
}

/* Toast slide-in animation */
@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

.toast {
    animation: slideInRight 0.3s ease forwards;
}

.toast.toast-exit {
    animation: slideOutRight 0.3s ease forwards;
}

/* YAML preview panel slide animation */
@keyframes slideInFromRight {
    from {
        transform: translateX(100%);
    }
    to {
        transform: translateX(0);
    }
}

.yaml-preview-panel.visible {
    animation: slideInFromRight 0.3s ease forwards;
}

/* Skeleton shimmer animation */
@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

.skeleton {
    background: linear-gradient(
        90deg,
        var(--bg-tertiary) 25%,
        var(--bg-secondary) 50%,
        var(--bg-tertiary) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
}

/* Checkbox check animation */
@keyframes checkmark {
    0% {
        transform: scale(0);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}

input[type="checkbox"]:checked {
    animation: checkmark 0.2s ease;
}

/* Fade in for dynamically loaded content */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.fade-in {
    animation: fadeIn 0.3s ease forwards;
}

/* Stagger animation for lists */
.stagger-in > * {
    opacity: 0;
    animation: fadeIn 0.3s ease forwards;
}

.stagger-in > *:nth-child(1) { animation-delay: 0.05s; }
.stagger-in > *:nth-child(2) { animation-delay: 0.1s; }
.stagger-in > *:nth-child(3) { animation-delay: 0.15s; }
.stagger-in > *:nth-child(4) { animation-delay: 0.2s; }
.stagger-in > *:nth-child(5) { animation-delay: 0.25s; }
.stagger-in > *:nth-child(6) { animation-delay: 0.3s; }
.stagger-in > *:nth-child(7) { animation-delay: 0.35s; }
.stagger-in > *:nth-child(8) { animation-delay: 0.4s; }
.stagger-in > *:nth-child(9) { animation-delay: 0.45s; }
.stagger-in > *:nth-child(10) { animation-delay: 0.5s; }

/* Loading spinner improvements */
.spinner {
    transition: opacity 0.2s ease;
}

/* Subtle scale on focus for buttons */
.btn:focus-visible {
    transform: scale(1.02);
}

/* Status badge pulse for warnings */
@keyframes warningPulse {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4);
    }
    50% {
        box-shadow: 0 0 0 4px rgba(245, 158, 11, 0);
    }
}

.badge-warning {
    animation: warningPulse 2s ease-in-out infinite;
}

/* Smooth height transitions for collapsibles */
.collapsible-content {
    overflow: hidden;
    transition: max-height 0.3s ease, opacity 0.3s ease;
}

.collapsible-content.collapsed {
    max-height: 0;
    opacity: 0;
}

.collapsible-content.expanded {
    max-height: 1000px;
    opacity: 1;
}

/* Input ripple effect placeholder */
.input-wrapper {
    position: relative;
    overflow: hidden;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ==========================================================================
   Keyboard Shortcuts Help Modal
   ========================================================================== */

.keyboard-help-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
}

.keyboard-help-modal.active {
    opacity: 1;
    visibility: visible;
}

.keyboard-help-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    transform: scale(0.95);
    transition: transform 0.2s ease;
}

.keyboard-help-modal.active .keyboard-help-content {
    transform: scale(1);
}

.keyboard-help-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-4);
    border-bottom: 1px solid var(--border-color);
}

.keyboard-help-header h3 {
    margin: 0;
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--text-primary);
}

.btn-close-help {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-muted);
    cursor: pointer;
    padding: var(--space-1);
    line-height: 1;
    transition: color 0.2s ease;
}

.btn-close-help:hover {
    color: var(--text-primary);
}

.keyboard-help-body {
    padding: var(--space-4);
    overflow-y: auto;
}

.shortcuts-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.shortcut-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-2) 0;
}

.shortcut-keys {
    display: flex;
    align-items: center;
    gap: var(--space-1);
}

.shortcut-keys kbd {
    display: inline-block;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: var(--space-1) var(--space-2);
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--text-primary);
    text-transform: capitalize;
    box-shadow: 0 1px 0 var(--border-color);
}

.shortcut-desc {
    color: var(--text-secondary);
    font-size: var(--text-sm);
}

.keyboard-help-footer {
    padding: var(--space-3) var(--space-4);
    border-top: 1px solid var(--border-color);
    text-align: center;
}

.keyboard-help-footer kbd {
    display: inline-block;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-sm);
    padding: 2px 6px;
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    margin: 0 2px;
}

/* ==========================================================================
   Accessibility Enhancements
   ========================================================================== */

/* Skip to content link */
.skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    background: var(--accent);
    color: var(--bg-primary);
    padding: var(--space-2) var(--space-4);
    z-index: 10001;
    transition: top 0.2s ease;
}

.skip-link:focus {
    top: 0;
}

/* Screen reader only content */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Focus indicator improvements */
:focus-visible {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --border-color: #fff;
        --text-primary: #fff;
        --text-secondary: #ccc;
    }

    .btn {
        border-width: 2px;
    }

    .form-control,
    .form-select {
        border-width: 2px;
    }
}

/* Forced colors mode (Windows High Contrast) */
@media (forced-colors: active) {
    .btn {
        border: 2px solid ButtonText;
    }

    .status-dot {
        forced-color-adjust: none;
    }

    .toast {
        border: 2px solid CanvasText;
    }
}

/* ==========================================================================
   Dashboard
   ========================================================================== */

.dashboard-panel {
    padding: var(--space-6);
    max-width: 1400px;
    margin: 0 auto;
}

.dashboard-header {
    margin-bottom: var(--space-8);
}

.dashboard-header h2 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-2xl);
    font-weight: 600;
}

.dashboard-section {
    margin-bottom: var(--space-8);
}

.dashboard-section-title {
    font-size: var(--text-lg);
    font-weight: 600;
    margin: 0 0 var(--space-4) 0;
    color: var(--text-primary);
}

/* Dashboard Grid */
.dashboard-grid {
    display: grid;
    gap: var(--space-4);
}

.dashboard-grid-3 {
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

.dashboard-grid-4 {
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

/* Dashboard Cards */
.dashboard-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    display: flex;
    align-items: flex-start;
    gap: var(--space-4);
    transition: all 0.2s ease;
}

.dashboard-card:hover {
    border-color: var(--border-hover);
    box-shadow: var(--shadow-md);
}

.dashboard-card.status-connected {
    border-color: var(--color-success);
    background: rgba(34, 197, 94, 0.05);
}

.dashboard-card.status-error {
    border-color: var(--color-error);
    background: rgba(239, 68, 68, 0.05);
}

.dashboard-card-icon {
    font-size: 2rem;
    line-height: 1;
    flex-shrink: 0;
}

.dashboard-card-content {
    flex: 1;
    min-width: 0;
}

.dashboard-card-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-1);
}

.dashboard-card-status {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-sm);
}

.dashboard-card-status .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--text-muted);
    flex-shrink: 0;
}

.dashboard-card-status .status-dot.connected {
    background: var(--color-success);
}

.dashboard-card-status .status-dot.error {
    background: var(--color-error);
}

.dashboard-card-status .status-text {
    color: var(--text-secondary);
}

.dashboard-card-detail {
    font-size: var(--text-xs);
    color: var(--text-muted);
    margin-top: var(--space-1);
}

.dashboard-card .btn {
    flex-shrink: 0;
    align-self: center;
}

/* Dashboard Libraries */
.dashboard-libraries {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: var(--space-3);
}

.dashboard-library-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--space-4);
    transition: all 0.2s ease;
}

.dashboard-library-card:hover {
    border-color: var(--border-hover);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.dashboard-library-card .library-icon {
    font-size: 1.5rem;
    margin-bottom: var(--space-2);
}

.dashboard-library-card .library-name {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-1);
}

.dashboard-library-card .library-type {
    font-size: var(--text-xs);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

/* Dashboard Empty State */
.dashboard-empty-state {
    text-align: center;
    padding: var(--space-8);
    background: var(--bg-secondary);
    border: 2px dashed var(--border-color);
    border-radius: var(--radius-lg);
}

.dashboard-empty-state .empty-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--space-3);
    opacity: 0.5;
}

.dashboard-empty-state p {
    color: var(--text-muted);
    margin-bottom: var(--space-4);
}

/* Dashboard Actions */
.dashboard-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--space-3);
}

.dashboard-action-btn {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    padding: var(--space-4);
    text-align: left;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.dashboard-action-btn:hover {
    border-color: var(--accent);
    background: var(--bg-tertiary);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.dashboard-action-btn:active {
    transform: translateY(0);
}

.dashboard-action-btn .action-icon {
    font-size: 1.5rem;
    margin-bottom: var(--space-1);
}

.dashboard-action-btn .action-label {
    font-weight: 600;
    color: var(--text-primary);
}

.dashboard-action-btn .action-desc {
    font-size: var(--text-sm);
    color: var(--text-muted);
}

/* Dashboard Activity */
.dashboard-activity {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.activity-empty {
    padding: var(--space-6);
    text-align: center;
    color: var(--text-muted);
}

.activity-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--border-color);
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-item .activity-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--bg-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.activity-item .activity-icon.success {
    background: rgba(34, 197, 94, 0.1);
    color: var(--color-success);
}

.activity-item .activity-icon.error {
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-error);
}

.activity-item .activity-content {
    flex: 1;
    min-width: 0;
}

.activity-item .activity-title {
    font-weight: 500;
    color: var(--text-primary);
}

.activity-item .activity-time {
    font-size: var(--text-xs);
    color: var(--text-muted);
}

/* Responsive Dashboard */
@media (max-width: 768px) {
    .dashboard-panel {
        padding: var(--space-4);
    }

    .dashboard-grid-3,
    .dashboard-grid-4 {
        grid-template-columns: 1fr;
    }

    .dashboard-actions {
        grid-template-columns: 1fr;
    }

    .dashboard-card {
        flex-direction: column;
        text-align: center;
    }

    .dashboard-card .btn {
        align-self: stretch;
    }
}

/* ==========================================================================
   Setup Wizard
   ========================================================================== */

.wizard-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
    padding: var(--space-4);
}

.wizard-modal.active {
    opacity: 1;
    visibility: visible;
}

.wizard-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-xl);
    width: 100%;
    max-width: 600px;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
    transform: scale(0.95) translateY(20px);
    transition: transform 0.3s ease;
}

.wizard-modal.active .wizard-content {
    transform: scale(1) translateY(0);
}

.wizard-close {
    position: absolute;
    top: var(--space-3);
    right: var(--space-3);
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-muted);
    cursor: pointer;
    padding: var(--space-1);
    line-height: 1;
    z-index: 1;
    transition: color 0.2s ease;
}

.wizard-close:hover {
    color: var(--text-primary);
}

.wizard-header {
    text-align: center;
    padding: var(--space-6) var(--space-6) var(--space-4);
}

.wizard-header h2 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-2xl);
    font-weight: 600;
}

/* Wizard Progress */
.wizard-progress {
    display: flex;
    justify-content: center;
    gap: var(--space-2);
    padding: 0 var(--space-6) var(--space-4);
}

.wizard-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-1);
    position: relative;
    flex: 1;
    max-width: 100px;
}

.wizard-step::after {
    content: '';
    position: absolute;
    top: 14px;
    left: calc(50% + 18px);
    width: calc(100% - 36px);
    height: 2px;
    background: var(--border-color);
}

.wizard-step:last-child::after {
    display: none;
}

.wizard-step.active::after,
.wizard-step.completed::after {
    background: var(--accent);
}

.step-number {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--bg-tertiary);
    border: 2px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--text-muted);
    transition: all 0.2s ease;
    position: relative;
    z-index: 1;
}

.wizard-step.active .step-number {
    background: var(--accent);
    border-color: var(--accent);
    color: var(--bg-primary);
}

.wizard-step.completed .step-number {
    background: var(--color-success);
    border-color: var(--color-success);
    color: white;
}

.wizard-step.completed .step-number::after {
    content: 'âœ“';
    position: absolute;
}

.step-label {
    font-size: var(--text-xs);
    color: var(--text-muted);
    transition: color 0.2s ease;
}

.wizard-step.active .step-label {
    color: var(--text-primary);
    font-weight: 500;
}

/* Wizard Panels */
.wizard-panel {
    display: none;
    flex-direction: column;
    padding: var(--space-4) var(--space-6);
    overflow-y: auto;
}

.wizard-panel.active {
    display: flex;
    animation: fadeIn 0.3s ease;
}

.wizard-panel-header {
    text-align: center;
    margin-bottom: var(--space-5);
}

.wizard-panel-header .panel-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--space-3);
}

.wizard-panel-header h3 {
    margin: 0 0 var(--space-2) 0;
    font-size: var(--text-xl);
    font-weight: 600;
}

.wizard-panel-header p {
    color: var(--text-muted);
    margin: 0;
}

.wizard-panel-body {
    flex: 1;
    min-height: 0;
}

.wizard-panel-body .form-group {
    margin-bottom: var(--space-4);
}

.wizard-panel-footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-3);
    padding-top: var(--space-4);
    border-top: 1px solid var(--border-color);
    margin-top: var(--space-4);
}

/* Wizard Test Result */
.wizard-test-result {
    padding: var(--space-3);
    border-radius: var(--radius-md);
    margin-top: var(--space-3);
    display: none;
}

.wizard-test-result.visible {
    display: block;
    animation: fadeIn 0.3s ease;
}

.wizard-test-result.success {
    background: rgba(34, 197, 94, 0.1);
    border: 1px solid var(--color-success);
    color: var(--color-success);
}

.wizard-test-result.error {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid var(--color-error);
    color: var(--color-error);
}

.wizard-test-result.loading {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
}

/* Wizard Summary */
.wizard-summary {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    margin-bottom: var(--space-5);
}

.summary-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-3);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
}

.summary-item .summary-icon {
    font-size: 1.5rem;
}

.summary-item .summary-label {
    font-weight: 500;
    flex: 1;
}

.summary-item .summary-status {
    font-size: var(--text-sm);
    color: var(--text-muted);
}

.summary-item.configured .summary-status {
    color: var(--color-success);
}

.summary-item.configured .summary-status::before {
    content: 'âœ“ ';
}

/* Wizard Next Steps */
.wizard-next-steps {
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    padding: var(--space-4);
}

.wizard-next-steps h4 {
    margin: 0 0 var(--space-3) 0;
    font-size: var(--text-base);
    font-weight: 600;
}

.wizard-next-steps ul {
    margin: 0;
    padding-left: var(--space-5);
}

.wizard-next-steps li {
    margin-bottom: var(--space-2);
    color: var(--text-secondary);
}

.wizard-next-steps li:last-child {
    margin-bottom: 0;
}

/* Responsive Wizard */
@media (max-width: 640px) {
    .wizard-content {
        max-height: 100vh;
        border-radius: 0;
    }

    .wizard-progress {
        gap: var(--space-1);
    }

    .step-label {
        display: none;
    }

    .wizard-panel-footer {
        flex-direction: column;
    }

    .wizard-panel-footer .btn {
        width: 100%;
    }
}

/* ==========================================================================
   Profile Switcher
   ========================================================================== */

.profile-switcher {
    position: relative;
    margin-left: auto;
    margin-right: var(--space-4);
}

.profile-switcher-btn {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    cursor: pointer;
    font-size: var(--text-sm);
    transition: all 0.2s ease;
}

.profile-switcher-btn:hover {
    background: var(--bg-secondary);
    border-color: var(--border-hover);
}

.profile-switcher-btn[aria-expanded="true"] {
    background: var(--bg-secondary);
    border-color: var(--accent);
}

.profile-icon {
    font-size: 1rem;
}

.profile-name {
    font-weight: 500;
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.profile-chevron {
    font-size: 10px;
    color: var(--text-muted);
    transition: transform 0.2s ease;
}

.profile-switcher-btn[aria-expanded="true"] .profile-chevron {
    transform: rotate(180deg);
}

/* Profile Dropdown */
.profile-dropdown {
    position: absolute;
    top: calc(100% + var(--space-2));
    right: 0;
    width: 280px;
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    z-index: 1000;
}

.profile-dropdown.active {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.profile-dropdown-header {
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--border-color);
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.profile-list {
    max-height: 200px;
    overflow-y: auto;
    padding: var(--space-2);
}

.profile-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-2) var(--space-3);
    background: none;
    border: none;
    border-radius: var(--radius-md);
    color: var(--text-primary);
    cursor: pointer;
    font-size: var(--text-sm);
    text-align: left;
    transition: all 0.2s ease;
}

.profile-item:hover {
    background: var(--bg-tertiary);
}

.profile-item.active {
    background: rgba(229, 160, 13, 0.1);
}

.profile-item-icon {
    font-size: 1rem;
}

.profile-item-name {
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.profile-item-check {
    color: var(--accent);
    opacity: 0;
}

.profile-item.active .profile-item-check {
    opacity: 1;
}

.profile-dropdown-actions {
    display: flex;
    gap: var(--space-2);
    padding: var(--space-3);
    border-top: 1px solid var(--border-color);
}

.profile-dropdown-actions .btn {
    flex: 1;
    justify-content: center;
}

/* Save Profile Modal */
.save-profile-modal {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10001;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
}

.save-profile-modal.active {
    opacity: 1;
    visibility: visible;
}

.save-profile-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-5);
    width: 90%;
    max-width: 400px;
}

.save-profile-content h3 {
    margin: 0 0 var(--space-4) 0;
}

.save-profile-content .form-group {
    margin-bottom: var(--space-4);
}

.save-profile-content .form-actions {
    display: flex;
    gap: var(--space-3);
    justify-content: flex-end;
}

/* Responsive Profile Switcher */
@media (max-width: 768px) {
    .profile-switcher {
        margin-right: var(--space-2);
    }

    .profile-name {
        display: none;
    }

    .profile-switcher-btn {
        padding: var(--space-2);
    }

    .profile-dropdown {
        right: -50px;
        width: calc(100vw - 32px);
        max-width: 300px;
    }
}

/* ==========================================================================
   Overlay Gallery
   ========================================================================== */

.overlay-gallery-section {
    padding: var(--space-5);
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-color);
}

.overlay-gallery-header {
    margin-bottom: var(--space-4);
}

.overlay-gallery-header h3 {
    margin: 0 0 var(--space-1) 0;
    font-size: var(--text-lg);
    font-weight: 600;
}

.overlay-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: var(--space-4);
}

.overlay-gallery-item {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-3);
    cursor: pointer;
    transition: all 0.2s ease;
}

.overlay-gallery-item:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.overlay-gallery-item:active {
    transform: translateY(0);
}

.gallery-item-preview {
    margin-bottom: var(--space-3);
}

.preview-poster-mini {
    width: 100%;
    aspect-ratio: 2/3;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-radius: var(--radius-md);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.preview-poster-mini.custom {
    background: var(--bg-secondary);
    border: 2px dashed var(--border-color);
}

.preview-poster-mini .plus-icon {
    font-size: 2rem;
    color: var(--text-muted);
}

/* Overlay Badge Previews */
.preview-overlay-badge {
    position: absolute;
    padding: var(--space-1) var(--space-2);
    font-size: var(--text-xs);
    font-weight: 700;
    border-radius: var(--radius-sm);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.preview-overlay-badge.resolution {
    top: var(--space-2);
    left: var(--space-2);
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    color: white;
}

.preview-overlay-badge.audio {
    top: var(--space-2);
    right: var(--space-2);
    background: linear-gradient(135deg, #8b5cf6, #6d28d9);
    color: white;
}

.preview-overlay-badge.hdr {
    bottom: var(--space-2);
    left: var(--space-2);
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: black;
}

.preview-overlay-badge.ratings {
    bottom: var(--space-2);
    right: var(--space-2);
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
}

.preview-overlay-badge.streaming {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #e50914;
    color: white;
}

.preview-overlay-badge.awards {
    top: var(--space-2);
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: black;
    font-size: 1rem;
}

/* Ribbon style overlay */
.preview-overlay-ribbon {
    position: absolute;
    top: 12px;
    right: -30px;
    background: #ef4444;
    color: white;
    padding: 2px 30px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    transform: rotate(45deg);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.gallery-item-info {
    text-align: center;
}

.gallery-item-name {
    display: block;
    font-weight: 600;
    font-size: var(--text-sm);
    color: var(--text-primary);
    margin-bottom: 2px;
}

.gallery-item-desc {
    display: block;
    font-size: var(--text-xs);
    color: var(--text-muted);
}

/* Responsive Gallery */
@media (max-width: 640px) {
    .overlay-gallery {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-3);
    }

    .overlay-gallery-item {
        padding: var(--space-2);
    }
}

/* ==========================================================================
   Pre-flight Checklist
   ========================================================================== */

.preflight-checklist {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin-bottom: var(--space-5);
}

.preflight-checklist.all-ready {
    border-color: var(--color-success);
    background: rgba(34, 197, 94, 0.05);
}

.preflight-checklist.has-warnings {
    border-color: var(--color-warning);
    background: rgba(245, 158, 11, 0.05);
}

.preflight-checklist.has-errors {
    border-color: var(--color-error);
    background: rgba(239, 68, 68, 0.05);
}

.preflight-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-4);
}

.preflight-header h3 {
    margin: 0;
    font-size: var(--text-base);
    font-weight: 600;
}

.preflight-status {
    font-size: var(--text-sm);
    font-weight: 500;
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-sm);
    background: var(--bg-tertiary);
    color: var(--text-muted);
}

.preflight-status.ready {
    background: rgba(34, 197, 94, 0.1);
    color: var(--color-success);
}

.preflight-status.warning {
    background: rgba(245, 158, 11, 0.1);
    color: var(--color-warning);
}

.preflight-status.error {
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-error);
}

.preflight-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
}

.preflight-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    background: var(--bg-tertiary);
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
}

.preflight-item.ready {
    background: rgba(34, 197, 94, 0.1);
}

.preflight-item.warning {
    background: rgba(245, 158, 11, 0.1);
}

.preflight-item.error {
    background: rgba(239, 68, 68, 0.1);
}

.preflight-icon {
    font-size: 1.25rem;
    flex-shrink: 0;
}

.preflight-item.ready .preflight-icon::after {
    content: 'âœ…';
}

.preflight-item.warning .preflight-icon::after {
    content: 'âš ï¸';
}

.preflight-item.error .preflight-icon::after {
    content: 'âŒ';
}

.preflight-item.ready .preflight-icon,
.preflight-item.warning .preflight-icon,
.preflight-item.error .preflight-icon {
    font-size: 0;
}

.preflight-item.ready .preflight-icon::after,
.preflight-item.warning .preflight-icon::after,
.preflight-item.error .preflight-icon::after {
    font-size: 1.25rem;
}

.preflight-label {
    font-weight: 500;
    flex: 1;
}

.preflight-detail {
    font-size: var(--text-sm);
    color: var(--text-muted);
}

.preflight-item.ready .preflight-detail {
    color: var(--color-success);
}

.preflight-item.error .preflight-detail {
    color: var(--color-error);
}

.preflight-actions {
    display: flex;
    gap: var(--space-2);
}

/* Responsive Pre-flight */
@media (max-width: 640px) {
    .preflight-item {
        flex-wrap: wrap;
    }

    .preflight-detail {
        width: 100%;
        margin-left: calc(1.25rem + var(--space-3));
        margin-top: var(--space-1);
    }

    .preflight-actions {
        flex-direction: column;
    }

    .preflight-actions .btn {
        width: 100%;
    }
}

